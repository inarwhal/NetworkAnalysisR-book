<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Ego Network Data | Network Analysis: Integrating Social Network Theory, Method, and Application with R</title>
  <meta name="description" content="This is the website for the R tutorials associated with Network Analysis Integrating Social Network Theory, Method, and Application with R" />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Ego Network Data | Network Analysis: Integrating Social Network Theory, Method, and Application with R" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="This is the website for the R tutorials associated with Network Analysis Integrating Social Network Theory, Method, and Application with R" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Ego Network Data | Network Analysis: Integrating Social Network Theory, Method, and Application with R" />
  
  <meta name="twitter:description" content="This is the website for the R tutorials associated with Network Analysis Integrating Social Network Theory, Method, and Application with R" />
  

<meta name="author" content="Craig Rawlings, Jeffrey A. Smith, James Moody, and Daniel McFarland" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="ch5-Network-Visualization-R.html"/>
<link rel="next" href="ch7-Dyads-Triads-R.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/htmlwidgets-1.6.2/htmlwidgets.js"></script>
<script src="libs/d3-4.5.0/d3.min.js"></script>
<script src="libs/forceNetwork-binding-0.4/forceNetwork.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="https://inarwhal.github.io/NetworkAnalysisR-book/">
Network Analysis with R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="index.html"><a href="index.html#how-to-read-the-book"><i class="fa fa-check"></i><b>1.1</b> How to Read the Book</a></li>
<li class="chapter" data-level="1.2" data-path="index.html"><a href="index.html#citations-and-use"><i class="fa fa-check"></i><b>1.2</b> Citations and Use</a></li>
<li class="chapter" data-level="1.3" data-path="index.html"><a href="index.html#updates-and-feedback"><i class="fa fa-check"></i><b>1.3</b> Updates and Feedback</a></li>
<li class="chapter" data-level="1.4" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i><b>1.4</b> Acknowledgments</a></li>
<li class="chapter" data-level="1.5" data-path="index.html"><a href="index.html#author-informtion"><i class="fa fa-check"></i><b>1.5</b> Author Informtion</a></li>
<li class="chapter" data-level="1.6" data-path="index.html"><a href="index.html#session-information"><i class="fa fa-check"></i><b>1.6</b> Session Information</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="ch2-intro-R.html"><a href="ch2-intro-R.html"><i class="fa fa-check"></i><b>2</b> Basic Introduction to R</a>
<ul>
<li class="chapter" data-level="2.1" data-path="ch2-intro-R.html"><a href="ch2-intro-R.html#preliminaries"><i class="fa fa-check"></i><b>2.1</b> Preliminaries</a></li>
<li class="chapter" data-level="2.2" data-path="ch2-intro-R.html"><a href="ch2-intro-R.html#packages"><i class="fa fa-check"></i><b>2.2</b> Packages</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="ch3-Network-Data-R.html"><a href="ch3-Network-Data-R.html"><i class="fa fa-check"></i><b>3</b> Network Data</a></li>
<li class="chapter" data-level="" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html"><i class="fa fa-check"></i>3, Part 1. Cross-Sectional Network Data</a>
<ul>
<li class="chapter" data-level="3.1" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#reading-data-into-r"><i class="fa fa-check"></i><b>3.1</b> Reading Data into R</a></li>
<li class="chapter" data-level="3.2" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#networks-in-igraph"><i class="fa fa-check"></i><b>3.2</b> Networks in igraph</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#using-a-matrix-to-construct-the-network"><i class="fa fa-check"></i><b>3.2.1</b> Using a Matrix to Construct the Network</a></li>
<li class="chapter" data-level="3.2.2" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#using-an-edgelist-to-construct-the-network"><i class="fa fa-check"></i><b>3.2.2</b> Using an Edgelist to Construct the Network</a></li>
<li class="chapter" data-level="3.2.3" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#extracting-information-from-igraph-objects"><i class="fa fa-check"></i><b>3.2.3</b> Extracting Information from igraph Objects</a></li>
<li class="chapter" data-level="3.2.4" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#using-an-adjacency-list-to-construct-the-network"><i class="fa fa-check"></i><b>3.2.4</b> Using an Adjacency List to Construct the Network</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#using-the-network-package"><i class="fa fa-check"></i><b>3.3</b> Using the network Package</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#using-a-matrix-to-construct-the-network-1"><i class="fa fa-check"></i><b>3.3.1</b> Using a Matrix to Construct the Network</a></li>
<li class="chapter" data-level="3.3.2" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#using-an-edgelist-to-construct-the-network-1"><i class="fa fa-check"></i><b>3.3.2</b> Using an Edgelist to Construct the Network</a></li>
<li class="chapter" data-level="3.3.3" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#putting-edge-attributes-onto-the-network"><i class="fa fa-check"></i><b>3.3.3</b> Putting Edge Attributes onto the Network</a></li>
<li class="chapter" data-level="3.3.4" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#moving-between-igraph-and-network-objects"><i class="fa fa-check"></i><b>3.3.4</b> Moving between igraph and network Objects</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#some-key-network-measures"><i class="fa fa-check"></i><b>3.4</b> Some Key Network Measures</a>
<ul>
<li class="chapter" data-level="3.4.1" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#degree"><i class="fa fa-check"></i><b>3.4.1</b> Degree</a></li>
<li class="chapter" data-level="3.4.2" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#density"><i class="fa fa-check"></i><b>3.4.2</b> Density</a></li>
<li class="chapter" data-level="3.4.3" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#walks"><i class="fa fa-check"></i><b>3.4.3</b> Walks</a></li>
<li class="chapter" data-level="3.4.4" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#paths-distance-and-closeness"><i class="fa fa-check"></i><b>3.4.4</b> Paths, Distance, and Closeness</a></li>
<li class="chapter" data-level="3.4.5" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#reachability"><i class="fa fa-check"></i><b>3.4.5</b> Reachability</a></li>
<li class="chapter" data-level="3.4.6" data-path="ch3-Cross-Sectional-Network-Data-R.html"><a href="ch3-Cross-Sectional-Network-Data-R.html#diameter"><i class="fa fa-check"></i><b>3.4.6</b> Diameter</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="ch3-Dynamic-Network-Data-R.html"><a href="ch3-Dynamic-Network-Data-R.html"><i class="fa fa-check"></i>3, Part 2. Dynamic Network Data</a>
<ul>
<li class="chapter" data-level="3.5" data-path="ch3-Dynamic-Network-Data-R.html"><a href="ch3-Dynamic-Network-Data-R.html#discrete-longitudinal-networks"><i class="fa fa-check"></i><b>3.5</b> Discrete Longitudinal Networks</a>
<ul>
<li class="chapter" data-level="3.5.1" data-path="ch3-Dynamic-Network-Data-R.html"><a href="ch3-Dynamic-Network-Data-R.html#getting-the-data-ready"><i class="fa fa-check"></i><b>3.5.1</b> Getting the Data Ready</a></li>
<li class="chapter" data-level="3.5.2" data-path="ch3-Dynamic-Network-Data-R.html"><a href="ch3-Dynamic-Network-Data-R.html#constructing-networkdynamic-objects"><i class="fa fa-check"></i><b>3.5.2</b> Constructing networkDynamic Objects</a></li>
<li class="chapter" data-level="3.5.3" data-path="ch3-Dynamic-Network-Data-R.html"><a href="ch3-Dynamic-Network-Data-R.html#summary-statistics"><i class="fa fa-check"></i><b>3.5.3</b> Summary Statistics</a></li>
</ul></li>
<li class="chapter" data-level="3.6" data-path="ch3-Dynamic-Network-Data-R.html"><a href="ch3-Dynamic-Network-Data-R.html#continuous-time-networks"><i class="fa fa-check"></i><b>3.6</b> Continuous-Time Networks</a>
<ul>
<li class="chapter" data-level="3.6.1" data-path="ch3-Dynamic-Network-Data-R.html"><a href="ch3-Dynamic-Network-Data-R.html#getting-the-data-ready-1"><i class="fa fa-check"></i><b>3.6.1</b> Getting the Data Ready</a></li>
<li class="chapter" data-level="3.6.2" data-path="ch3-Dynamic-Network-Data-R.html"><a href="ch3-Dynamic-Network-Data-R.html#constructing-networkdynamic-objects-1"><i class="fa fa-check"></i><b>3.6.2</b> Constructing networkDynamic Objects</a></li>
<li class="chapter" data-level="3.6.3" data-path="ch3-Dynamic-Network-Data-R.html"><a href="ch3-Dynamic-Network-Data-R.html#summary-statistics-1"><i class="fa fa-check"></i><b>3.6.3</b> Summary Statistics</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="4" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html"><i class="fa fa-check"></i><b>4</b> Missing Network Data</a>
<ul>
<li class="chapter" data-level="4.1" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#missing-data"><i class="fa fa-check"></i><b>4.1</b> Missing Data</a></li>
<li class="chapter" data-level="4.2" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#listwise-deletion"><i class="fa fa-check"></i><b>4.2</b> Listwise Deletion</a></li>
<li class="chapter" data-level="4.3" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#gauging-the-level-of-bias"><i class="fa fa-check"></i><b>4.3</b> Gauging the Level of Bias</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#gauging-bias-using-past-results"><i class="fa fa-check"></i><b>4.3.1</b> Gauging Bias Using Past Results</a></li>
<li class="chapter" data-level="4.3.2" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#gauging-bias-using-predictive-models"><i class="fa fa-check"></i><b>4.3.2</b> Gauging Bias Using Predictive Models</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#simple-imputation-options"><i class="fa fa-check"></i><b>4.4</b> Simple Imputation Options</a>
<ul>
<li class="chapter" data-level="4.4.1" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#simple-imputation-with-asymmetric-option"><i class="fa fa-check"></i><b>4.4.1</b> Simple Imputation with Asymmetric Option</a></li>
<li class="chapter" data-level="4.4.2" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#simple-imputation-with-symmetric-option"><i class="fa fa-check"></i><b>4.4.2</b> Simple Imputation with Symmetric Option</a></li>
<li class="chapter" data-level="4.4.3" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#simple-imputation-with-probabilistic-option"><i class="fa fa-check"></i><b>4.4.3</b> Simple Imputation with Probabilistic Option</a></li>
<li class="chapter" data-level="4.4.4" data-path="ch4-Missing-Network-Data-R.html"><a href="ch4-Missing-Network-Data-R.html#comparing-estimates"><i class="fa fa-check"></i><b>4.4.4</b> Comparing Estimates</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="5" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html"><i class="fa fa-check"></i><b>5</b> Network Visualization</a>
<ul>
<li class="chapter" data-level="5.1" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#setting-up-the-session"><i class="fa fa-check"></i><b>5.1</b> Setting up the Session</a></li>
<li class="chapter" data-level="5.2" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#network-plots-using-igraph"><i class="fa fa-check"></i><b>5.2</b> Network Plots using igraph</a></li>
<li class="chapter" data-level="5.3" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#network-plots-based-on-ggplot"><i class="fa fa-check"></i><b>5.3</b> Network Plots based on ggplot</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#ggally-package"><i class="fa fa-check"></i><b>5.3.1</b> GGally package</a></li>
<li class="chapter" data-level="5.3.2" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#ggnetwork-package"><i class="fa fa-check"></i><b>5.3.2</b> ggnetwork package</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#contour-plots"><i class="fa fa-check"></i><b>5.4</b> Contour Plots</a></li>
<li class="chapter" data-level="5.5" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#interactive-plots"><i class="fa fa-check"></i><b>5.5</b> Interactive Plots</a></li>
<li class="chapter" data-level="5.6" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#dynamic-network-visualizations"><i class="fa fa-check"></i><b>5.6</b> Dynamic Network Visualizations</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#getting-the-data-ready-2"><i class="fa fa-check"></i><b>5.6.1</b> Getting the Data Ready</a></li>
<li class="chapter" data-level="5.6.2" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#time-flattened-visualizations"><i class="fa fa-check"></i><b>5.6.2</b> Time Flattened Visualizations</a></li>
<li class="chapter" data-level="5.6.3" data-path="ch5-Network-Visualization-R.html"><a href="ch5-Network-Visualization-R.html#dynamic-network-movies"><i class="fa fa-check"></i><b>5.6.3</b> Dynamic Network Movies</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="6" data-path="ch6-Ego-Network-Data-R.html"><a href="ch6-Ego-Network-Data-R.html"><i class="fa fa-check"></i><b>6</b> Ego Network Data</a>
<ul>
<li class="chapter" data-level="6.1" data-path="ch6-Ego-Network-Data-R.html"><a href="ch6-Ego-Network-Data-R.html#working-with-ego-network-data"><i class="fa fa-check"></i><b>6.1</b> Working with Ego Network Data</a></li>
<li class="chapter" data-level="6.2" data-path="ch6-Ego-Network-Data-R.html"><a href="ch6-Ego-Network-Data-R.html#plotting-networks"><i class="fa fa-check"></i><b>6.2</b> Plotting Networks</a></li>
<li class="chapter" data-level="6.3" data-path="ch6-Ego-Network-Data-R.html"><a href="ch6-Ego-Network-Data-R.html#homophily-ego-alter-attributes"><i class="fa fa-check"></i><b>6.3</b> Homophily: Ego-Alter Attributes</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="ch6-Ego-Network-Data-R.html"><a href="ch6-Ego-Network-Data-R.html#proportion-of-alters-matching-ego"><i class="fa fa-check"></i><b>6.3.1</b> Proportion of Alters Matching Ego</a></li>
<li class="chapter" data-level="6.3.2" data-path="ch6-Ego-Network-Data-R.html"><a href="ch6-Ego-Network-Data-R.html#analyzing-homophily-at-the-dyadic-level-ego-alter-pairs"><i class="fa fa-check"></i><b>6.3.2</b> Analyzing Homophily at the Dyadic Level: Ego-Alter Pairs</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="ch6-Ego-Network-Data-R.html"><a href="ch6-Ego-Network-Data-R.html#homophily-alter-attributes"><i class="fa fa-check"></i><b>6.4</b> Homophily: Alter Attributes</a></li>
<li class="chapter" data-level="6.5" data-path="ch6-Ego-Network-Data-R.html"><a href="ch6-Ego-Network-Data-R.html#ego-networks-as-predictors"><i class="fa fa-check"></i><b>6.5</b> Ego Networks as Predictors</a></li>
<li class="chapter" data-level="6.6" data-path="ch6-Ego-Network-Data-R.html"><a href="ch6-Ego-Network-Data-R.html#working-with-one-input-file"><i class="fa fa-check"></i><b>6.6</b> Working with One Input File</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html"><i class="fa fa-check"></i><b>7</b> Dyads and Triads</a>
<ul>
<li class="chapter" data-level="7.1" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html#setting-up-the-session-1"><i class="fa fa-check"></i><b>7.1</b> Setting up the Session</a></li>
<li class="chapter" data-level="7.2" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html#dyadic-processes"><i class="fa fa-check"></i><b>7.2</b> Dyadic Processes</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html#dyad-census-and-reciprocity"><i class="fa fa-check"></i><b>7.2.1</b> Dyad Census and Reciprocity</a></li>
<li class="chapter" data-level="7.2.2" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html#conditional-uniform-graph-tests"><i class="fa fa-check"></i><b>7.2.2</b> Conditional Uniform Graph Tests</a></li>
<li class="chapter" data-level="7.2.3" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html#dyad-census-by-attributes-of-nodes"><i class="fa fa-check"></i><b>7.2.3</b> Dyad Census by Attributes of Nodes</a></li>
<li class="chapter" data-level="7.2.4" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html#advice-and-friendship-together"><i class="fa fa-check"></i><b>7.2.4</b> Advice and Friendship Together</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html#triadic-processes"><i class="fa fa-check"></i><b>7.3</b> Triadic Processes</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html#triad-census"><i class="fa fa-check"></i><b>7.3.1</b> Triad Census</a></li>
<li class="chapter" data-level="7.3.2" data-path="ch7-Dyads-Triads-R.html"><a href="ch7-Dyads-Triads-R.html#transitivity"><i class="fa fa-check"></i><b>7.3.2</b> Transitivity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="8" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html"><i class="fa fa-check"></i><b>8</b> Network Cohesion and Communities</a>
<ul>
<li class="chapter" data-level="8.1" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#first-example-network"><i class="fa fa-check"></i><b>8.1</b> First Example Network</a></li>
<li class="chapter" data-level="8.2" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#cohesion"><i class="fa fa-check"></i><b>8.2</b> Cohesion</a></li>
<li class="chapter" data-level="8.3" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#community-or-group-detection"><i class="fa fa-check"></i><b>8.3</b> Community (or Group) Detection</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#walktrap"><i class="fa fa-check"></i><b>8.3.1</b> Walktrap</a></li>
<li class="chapter" data-level="8.3.2" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#edge-betweenness"><i class="fa fa-check"></i><b>8.3.2</b> Edge Betweenness</a></li>
<li class="chapter" data-level="8.3.3" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#scree-plots"><i class="fa fa-check"></i><b>8.3.3</b> Scree Plots</a></li>
<li class="chapter" data-level="8.3.4" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#multi-level-clustering"><i class="fa fa-check"></i><b>8.3.4</b> Multi-level Clustering</a></li>
<li class="chapter" data-level="8.3.5" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#cohesive-blocking"><i class="fa fa-check"></i><b>8.3.5</b> Cohesive Blocking</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#demographic-characteristics"><i class="fa fa-check"></i><b>8.4</b> Demographic Characteristics</a></li>
<li class="chapter" data-level="8.5" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#community-overlap"><i class="fa fa-check"></i><b>8.5</b> Community Overlap</a></li>
<li class="chapter" data-level="8.6" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#big-data-example"><i class="fa fa-check"></i><b>8.6</b> Big Data Example</a>
<ul>
<li class="chapter" data-level="8.6.1" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#multi-level-clustering-1"><i class="fa fa-check"></i><b>8.6.1</b> Multi-level Clustering</a></li>
<li class="chapter" data-level="8.6.2" data-path="ch8-Network-Cohesion-Communities-R.html"><a href="ch8-Network-Cohesion-Communities-R.html#looking-at-the-community-structure-within-the-initial-communities"><i class="fa fa-check"></i><b>8.6.2</b> Looking at the Community Structure within the Initial Communities</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="ch9-Network-Centrality-Hierarchy-R.html"><a href="ch9-Network-Centrality-Hierarchy-R.html"><i class="fa fa-check"></i><b>9</b> Network Centrality and Hierarchy</a>
<ul>
<li class="chapter" data-level="9.1" data-path="ch9-Network-Centrality-Hierarchy-R.html"><a href="ch9-Network-Centrality-Hierarchy-R.html#setting-up-the-session-2"><i class="fa fa-check"></i><b>9.1</b> Setting up the Session</a></li>
<li class="chapter" data-level="9.2" data-path="ch9-Network-Centrality-Hierarchy-R.html"><a href="ch9-Network-Centrality-Hierarchy-R.html#centrality"><i class="fa fa-check"></i><b>9.2</b> Centrality</a>
<ul>
<li class="chapter" data-level="9.2.1" data-path="ch9-Network-Centrality-Hierarchy-R.html"><a href="ch9-Network-Centrality-Hierarchy-R.html#centrality-measures-for-social-interactions"><i class="fa fa-check"></i><b>9.2.1</b> Centrality Measures for Social Interactions</a></li>
<li class="chapter" data-level="9.2.2" data-path="ch9-Network-Centrality-Hierarchy-R.html"><a href="ch9-Network-Centrality-Hierarchy-R.html#correlations-between-centrality-measures"><i class="fa fa-check"></i><b>9.2.2</b> Correlations between Centrality Measures</a></li>
<li class="chapter" data-level="9.2.3" data-path="ch9-Network-Centrality-Hierarchy-R.html"><a href="ch9-Network-Centrality-Hierarchy-R.html#centrality-for-task-interactions"><i class="fa fa-check"></i><b>9.2.3</b> Centrality for Task Interactions</a></li>
<li class="chapter" data-level="9.2.4" data-path="ch9-Network-Centrality-Hierarchy-R.html"><a href="ch9-Network-Centrality-Hierarchy-R.html#tasksocial-correlations"><i class="fa fa-check"></i><b>9.2.4</b> Task/Social Correlations</a></li>
</ul></li>
<li class="chapter" data-level="9.3" data-path="ch9-Network-Centrality-Hierarchy-R.html"><a href="ch9-Network-Centrality-Hierarchy-R.html#centralization"><i class="fa fa-check"></i><b>9.3</b> Centralization</a></li>
<li class="chapter" data-level="9.4" data-path="ch9-Network-Centrality-Hierarchy-R.html"><a href="ch9-Network-Centrality-Hierarchy-R.html#clustering-and-hierarchy"><i class="fa fa-check"></i><b>9.4</b> Clustering and Hierarchy</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html"><i class="fa fa-check"></i><b>10</b> Positions and Roles</a>
<ul>
<li class="chapter" data-level="10.1" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#classroom-network-data"><i class="fa fa-check"></i><b>10.1</b> Classroom Network Data</a></li>
<li class="chapter" data-level="10.2" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#getting-the-data-ready-3"><i class="fa fa-check"></i><b>10.2</b> Getting the Data Ready</a></li>
<li class="chapter" data-level="10.3" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#structural-equivalence"><i class="fa fa-check"></i><b>10.3</b> Structural Equivalence</a></li>
<li class="chapter" data-level="10.4" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#defining-positions"><i class="fa fa-check"></i><b>10.4</b> Defining Positions</a></li>
<li class="chapter" data-level="10.5" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#role-analysis"><i class="fa fa-check"></i><b>10.5</b> Role Analysis</a>
<ul>
<li class="chapter" data-level="10.5.1" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#permuting-the-matrix-by-position"><i class="fa fa-check"></i><b>10.5.1</b> Permuting the Matrix by Position</a></li>
<li class="chapter" data-level="10.5.2" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#constructing-a-blockmodel"><i class="fa fa-check"></i><b>10.5.2</b> Constructing a Blockmodel</a></li>
<li class="chapter" data-level="10.5.3" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#plotting-a-blockmodel"><i class="fa fa-check"></i><b>10.5.3</b> Plotting a Blockmodel</a></li>
<li class="chapter" data-level="10.5.4" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#interpretation-of-blockmodel"><i class="fa fa-check"></i><b>10.5.4</b> Interpretation of Blockmodel</a></li>
</ul></li>
<li class="chapter" data-level="10.6" data-path="ch10-Positions-Roles-R.html"><a href="ch10-Positions-Roles-R.html#local-equivalence"><i class="fa fa-check"></i><b>10.6</b> Local Equivalence</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html"><i class="fa fa-check"></i><b>11</b> Two-mode Networks: Affilitations and Dualities</a>
<ul>
<li class="chapter" data-level="11.1" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#example-affiliation-data"><i class="fa fa-check"></i><b>11.1</b> Example Affiliation Data</a></li>
<li class="chapter" data-level="11.2" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#plotting-the-network"><i class="fa fa-check"></i><b>11.2</b> Plotting the Network</a></li>
<li class="chapter" data-level="11.3" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#single-mode-networks"><i class="fa fa-check"></i><b>11.3</b> Single Mode Networks</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#constructing-one-mode-projections"><i class="fa fa-check"></i><b>11.3.1</b> Constructing One-Mode Projections</a></li>
<li class="chapter" data-level="11.3.2" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#plotting-one-mode-projections"><i class="fa fa-check"></i><b>11.3.2</b> Plotting One-Mode Projections</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#club-to-club-network"><i class="fa fa-check"></i><b>11.4</b> Club-to-Club Network</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#centrality-1"><i class="fa fa-check"></i><b>11.4.1</b> Centrality</a></li>
<li class="chapter" data-level="11.4.2" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#groups"><i class="fa fa-check"></i><b>11.4.2</b> Groups</a></li>
</ul></li>
<li class="chapter" data-level="11.5" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#using-the-tnet-package"><i class="fa fa-check"></i><b>11.5</b> Using the tnet package</a></li>
<li class="chapter" data-level="11.6" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#racial-segregation"><i class="fa fa-check"></i><b>11.6</b> Racial Segregation</a>
<ul>
<li class="chapter" data-level="11.6.1" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#proportion-of-co-membership-edges-where-students-match-on-race"><i class="fa fa-check"></i><b>11.6.1</b> Proportion of Co-membership Edges where Students Match on Race</a></li>
<li class="chapter" data-level="11.6.2" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#do-students-match-racially-with-at-least-one-other-student"><i class="fa fa-check"></i><b>11.6.2</b> Do Students Match Racially with at Least One Other Student?</a></li>
</ul></li>
<li class="chapter" data-level="11.7" data-path="ch11-Two-mode-Networks.html"><a href="ch11-Two-mode-Networks.html#club-centrality-and-attributes"><i class="fa fa-check"></i><b>11.7</b> Club Centrality and Attributes</a></li>
</ul></li>
<li class="chapter" data-level="12" data-path="ch12-Networks-Culture-R.html"><a href="ch12-Networks-Culture-R.html"><i class="fa fa-check"></i><b>12</b> Networks and Culture</a></li>
<li class="chapter" data-level="" data-path="ch12-Networks-Structure-Culture-text-R.html"><a href="ch12-Networks-Structure-Culture-text-R.html"><i class="fa fa-check"></i>12, Part 1. Cultural Structures</a>
<ul>
<li class="chapter" data-level="12.1" data-path="ch12-Networks-Structure-Culture-text-R.html"><a href="ch12-Networks-Structure-Culture-text-R.html#getting-the-data-ready-4"><i class="fa fa-check"></i><b>12.1</b> Getting the Data Ready</a></li>
<li class="chapter" data-level="12.2" data-path="ch12-Networks-Structure-Culture-text-R.html"><a href="ch12-Networks-Structure-Culture-text-R.html#topic-modeling"><i class="fa fa-check"></i><b>12.2</b> Topic Modeling</a>
<ul>
<li class="chapter" data-level="12.2.1" data-path="ch12-Networks-Structure-Culture-text-R.html"><a href="ch12-Networks-Structure-Culture-text-R.html#lda-initial-model"><i class="fa fa-check"></i><b>12.2.1</b> LDA: Initial Model</a></li>
<li class="chapter" data-level="12.2.2" data-path="ch12-Networks-Structure-Culture-text-R.html"><a href="ch12-Networks-Structure-Culture-text-R.html#lda-picking-the-number-of-topics"><i class="fa fa-check"></i><b>12.2.2</b> LDA: Picking the Number of Topics</a></li>
</ul></li>
<li class="chapter" data-level="12.3" data-path="ch12-Networks-Structure-Culture-text-R.html"><a href="ch12-Networks-Structure-Culture-text-R.html#a-network-representation"><i class="fa fa-check"></i><b>12.3</b> A Network Representation</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ch12-Networks-Cultural-Spaces-CA-R.html"><a href="ch12-Networks-Cultural-Spaces-CA-R.html"><i class="fa fa-check"></i>12, Part 2. Cultural Spaces</a>
<ul>
<li class="chapter" data-level="12.4" data-path="ch12-Networks-Cultural-Spaces-CA-R.html"><a href="ch12-Networks-Cultural-Spaces-CA-R.html#correspondence-analysis"><i class="fa fa-check"></i><b>12.4</b> Correspondence Analysis</a></li>
<li class="chapter" data-level="12.5" data-path="ch12-Networks-Cultural-Spaces-CA-R.html"><a href="ch12-Networks-Cultural-Spaces-CA-R.html#number-of-dimensions"><i class="fa fa-check"></i><b>12.5</b> Number of Dimensions</a></li>
<li class="chapter" data-level="12.6" data-path="ch12-Networks-Cultural-Spaces-CA-R.html"><a href="ch12-Networks-Cultural-Spaces-CA-R.html#importance-of-rowscolumns"><i class="fa fa-check"></i><b>12.6</b> Importance of Rows/Columns</a></li>
<li class="chapter" data-level="12.7" data-path="ch12-Networks-Cultural-Spaces-CA-R.html"><a href="ch12-Networks-Cultural-Spaces-CA-R.html#hierarchical-clustering"><i class="fa fa-check"></i><b>12.7</b> Hierarchical Clustering</a></li>
</ul></li>
<li class="chapter" data-level="13" data-path="ch13-Statistical-Models-Networks-R.html"><a href="ch13-Statistical-Models-Networks-R.html"><i class="fa fa-check"></i><b>13</b> Statistical Models for Networks</a></li>
<li class="chapter" data-level="" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><i class="fa fa-check"></i>13, Part 1. Cross-Sectional Network Models: ERGM</a>
<ul>
<li class="chapter" data-level="13.1" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#setting-up-the-session-3"><i class="fa fa-check"></i><b>13.1</b> Setting up the Session</a></li>
<li class="chapter" data-level="13.2" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#descriptive-statistics"><i class="fa fa-check"></i><b>13.2</b> Descriptive Statistics</a></li>
<li class="chapter" data-level="13.3" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#cug-tests"><i class="fa fa-check"></i><b>13.3</b> CUG Tests</a></li>
<li class="chapter" data-level="13.4" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#fitting-an-ergm"><i class="fa fa-check"></i><b>13.4</b> Fitting an ERGM</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#edges-only"><i class="fa fa-check"></i><b>13.4.1</b> Edges Only</a></li>
<li class="chapter" data-level="13.4.2" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#edges-and-homophily"><i class="fa fa-check"></i><b>13.4.2</b> Edges and Homophily</a></li>
<li class="chapter" data-level="13.4.3" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#edges-homophily-and-node-covariates"><i class="fa fa-check"></i><b>13.4.3</b> Edges, Homophily, and Node Covariates</a></li>
<li class="chapter" data-level="13.4.4" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#edges-homophily-node-covariates-and-reciprocity"><i class="fa fa-check"></i><b>13.4.4</b> Edges, Homophily, Node Covariates, and Reciprocity</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#checking-model-convergence"><i class="fa fa-check"></i><b>13.5</b> Checking Model Convergence</a></li>
<li class="chapter" data-level="13.6" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#goodness-of-fit"><i class="fa fa-check"></i><b>13.6</b> Goodness of Fit</a></li>
<li class="chapter" data-level="13.7" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#adding-gwesp-to-the-model"><i class="fa fa-check"></i><b>13.7</b> Adding GWESP to the Model</a></li>
<li class="chapter" data-level="13.8" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#simulation"><i class="fa fa-check"></i><b>13.8</b> Simulation</a></li>
<li class="chapter" data-level="13.9" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#example-on-a-large-network"><i class="fa fa-check"></i><b>13.9</b> Example on a Large Network</a></li>
<li class="chapter" data-level="13.10" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#ergm-on-a-valued-network"><i class="fa fa-check"></i><b>13.10</b> ERGM on a Valued Network</a>
<ul>
<li class="chapter" data-level="13.10.1" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#baseline-ergm-on-valued-network"><i class="fa fa-check"></i><b>13.10.1</b> Baseline ERGM on Valued Network</a></li>
<li class="chapter" data-level="13.10.2" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#adding-nodematch-and-nodefactor-terms"><i class="fa fa-check"></i><b>13.10.2</b> Adding Nodematch and Nodefactor Terms</a></li>
<li class="chapter" data-level="13.10.3" data-path="ch13-Cross-Sectional-Network-Models-ERGM-R.html"><a href="ch13-Cross-Sectional-Network-Models-ERGM-R.html#transitivity-in-valued-networks"><i class="fa fa-check"></i><b>13.10.3</b> Transitivity in Valued Networks</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="ch13-Longitudinal-Network-Models-STERGM-R.html"><a href="ch13-Longitudinal-Network-Models-STERGM-R.html"><i class="fa fa-check"></i>13, Part 2. Longitudinal Network Models: STERGM</a>
<ul>
<li class="chapter" data-level="13.11" data-path="ch13-Longitudinal-Network-Models-STERGM-R.html"><a href="ch13-Longitudinal-Network-Models-STERGM-R.html#getting-the-data-ready-5"><i class="fa fa-check"></i><b>13.11</b> Getting the Data Ready</a></li>
<li class="chapter" data-level="13.12" data-path="ch13-Longitudinal-Network-Models-STERGM-R.html"><a href="ch13-Longitudinal-Network-Models-STERGM-R.html#stergms"><i class="fa fa-check"></i><b>13.12</b> STERGMs</a>
<ul>
<li class="chapter" data-level="13.12.1" data-path="ch13-Longitudinal-Network-Models-STERGM-R.html"><a href="ch13-Longitudinal-Network-Models-STERGM-R.html#model-1-just-edges"><i class="fa fa-check"></i><b>13.12.1</b> Model 1: Just Edges</a></li>
<li class="chapter" data-level="13.12.2" data-path="ch13-Longitudinal-Network-Models-STERGM-R.html"><a href="ch13-Longitudinal-Network-Models-STERGM-R.html#model-2-edges-homophily-and-nodefactor"><i class="fa fa-check"></i><b>13.12.2</b> Model 2: Edges, Homophily and Nodefactor</a></li>
<li class="chapter" data-level="13.12.3" data-path="ch13-Longitudinal-Network-Models-STERGM-R.html"><a href="ch13-Longitudinal-Network-Models-STERGM-R.html#model-3-edges-nodefactor-and-seating"><i class="fa fa-check"></i><b>13.12.3</b> Model 3: Edges, Nodefactor, and Seating</a></li>
<li class="chapter" data-level="13.12.4" data-path="ch13-Longitudinal-Network-Models-STERGM-R.html"><a href="ch13-Longitudinal-Network-Models-STERGM-R.html#model-4-adding-gwesp-to-the-model"><i class="fa fa-check"></i><b>13.12.4</b> Model 4: Adding GWESP to the Model</a></li>
</ul></li>
<li class="chapter" data-level="13.13" data-path="ch13-Longitudinal-Network-Models-STERGM-R.html"><a href="ch13-Longitudinal-Network-Models-STERGM-R.html#checking-model-fit"><i class="fa fa-check"></i><b>13.13</b> Checking Model Fit</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><i class="fa fa-check"></i>13, Part 3. Two-mode Network Models</a>
<ul>
<li class="chapter" data-level="13.14" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#affiliation-data"><i class="fa fa-check"></i><b>13.14</b> Affiliation Data</a></li>
<li class="chapter" data-level="13.15" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#ergm-on-a-two-mode-network"><i class="fa fa-check"></i><b>13.15</b> ERGM on a Two-mode Network</a>
<ul>
<li class="chapter" data-level="13.15.1" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#edges"><i class="fa fa-check"></i><b>13.15.1</b> Edges</a></li>
<li class="chapter" data-level="13.15.2" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#adjusting-for-structural-issues-gender-and-grade-specific-clubs"><i class="fa fa-check"></i><b>13.15.2</b> Adjusting for Structural Issues: Gender and Grade Specific Clubs</a></li>
</ul></li>
<li class="chapter" data-level="13.16" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#second-mode-terms"><i class="fa fa-check"></i><b>13.16</b> Second Mode Terms</a>
<ul>
<li class="chapter" data-level="13.16.1" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#nodefactor"><i class="fa fa-check"></i><b>13.16.1</b> Nodefactor</a></li>
<li class="chapter" data-level="13.16.2" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#homophily"><i class="fa fa-check"></i><b>13.16.2</b> Homophily</a></li>
</ul></li>
<li class="chapter" data-level="13.17" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#first-mode-terms"><i class="fa fa-check"></i><b>13.17</b> First Mode Terms</a></li>
<li class="chapter" data-level="13.18" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#clustering"><i class="fa fa-check"></i><b>13.18</b> Clustering</a></li>
<li class="chapter" data-level="13.19" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#two-mode-longitudinal-networks"><i class="fa fa-check"></i><b>13.19</b> Two-mode Longitudinal Networks</a>
<ul>
<li class="chapter" data-level="13.19.1" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#entry-and-exit-of-nodes"><i class="fa fa-check"></i><b>13.19.1</b> Entry and Exit of Nodes</a></li>
</ul></li>
<li class="chapter" data-level="13.20" data-path="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html"><a href="ch13-Two-mode-Network-Models-ERGM-STERGM-R.html#stergm-on-a-two-mode-network"><i class="fa fa-check"></i><b>13.20</b> STERGM on a Two-mode Network</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="ch13-Relational-Event-Models-R.html"><a href="ch13-Relational-Event-Models-R.html"><i class="fa fa-check"></i>13, Part 4. Relational Event Models</a>
<ul>
<li class="chapter" data-level="13.21" data-path="ch13-Relational-Event-Models-R.html"><a href="ch13-Relational-Event-Models-R.html#getting-the-data-ready-6"><i class="fa fa-check"></i><b>13.21</b> Getting the Data Ready</a></li>
<li class="chapter" data-level="13.22" data-path="ch13-Relational-Event-Models-R.html"><a href="ch13-Relational-Event-Models-R.html#running-initial-models"><i class="fa fa-check"></i><b>13.22</b> Running Initial Models</a>
<ul>
<li class="chapter" data-level="13.22.1" data-path="ch13-Relational-Event-Models-R.html"><a href="ch13-Relational-Event-Models-R.html#intercept-only-model"><i class="fa fa-check"></i><b>13.22.1</b> Intercept Only Model</a></li>
<li class="chapter" data-level="13.22.2" data-path="ch13-Relational-Event-Models-R.html"><a href="ch13-Relational-Event-Models-R.html#adding-sender-and-receiver-effects"><i class="fa fa-check"></i><b>13.22.2</b> Adding Sender and Receiver Effects</a></li>
<li class="chapter" data-level="13.22.3" data-path="ch13-Relational-Event-Models-R.html"><a href="ch13-Relational-Event-Models-R.html#adding-covariate-event-terms"><i class="fa fa-check"></i><b>13.22.3</b> Adding Covariate Event Terms</a></li>
</ul></li>
<li class="chapter" data-level="13.23" data-path="ch13-Relational-Event-Models-R.html"><a href="ch13-Relational-Event-Models-R.html#micro-rules-of-interaction"><i class="fa fa-check"></i><b>13.23</b> Micro Rules of Interaction</a></li>
<li class="chapter" data-level="13.24" data-path="ch13-Relational-Event-Models-R.html"><a href="ch13-Relational-Event-Models-R.html#assessing-model-fit"><i class="fa fa-check"></i><b>13.24</b> Assessing Model Fit</a></li>
<li class="chapter" data-level="13.25" data-path="ch13-Relational-Event-Models-R.html"><a href="ch13-Relational-Event-Models-R.html#comparison-to-a-second-date"><i class="fa fa-check"></i><b>13.25</b> Comparison to a Second Date</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="ch14-Network-Diffusion-R.html"><a href="ch14-Network-Diffusion-R.html"><i class="fa fa-check"></i><b>14</b> Network Diffusion</a></li>
<li class="chapter" data-level="" data-path="ch14-Network-Diffusion-Infectious-Diseases-R.html"><a href="ch14-Network-Diffusion-Infectious-Diseases-R.html"><i class="fa fa-check"></i>14, Part 1. Network Diffusion: Infectious Diseases</a>
<ul>
<li class="chapter" data-level="14.1" data-path="ch14-Network-Diffusion-Infectious-Diseases-R.html"><a href="ch14-Network-Diffusion-Infectious-Diseases-R.html#reading-in-data"><i class="fa fa-check"></i><b>14.1</b> Reading in Data</a></li>
<li class="chapter" data-level="14.2" data-path="ch14-Network-Diffusion-Infectious-Diseases-R.html"><a href="ch14-Network-Diffusion-Infectious-Diseases-R.html#specifying-the-network-model"><i class="fa fa-check"></i><b>14.2</b> Specifying the Network Model</a></li>
<li class="chapter" data-level="14.3" data-path="ch14-Network-Diffusion-Infectious-Diseases-R.html"><a href="ch14-Network-Diffusion-Infectious-Diseases-R.html#estimating-the-network-model"><i class="fa fa-check"></i><b>14.3</b> Estimating the Network Model</a></li>
<li class="chapter" data-level="14.4" data-path="ch14-Network-Diffusion-Infectious-Diseases-R.html"><a href="ch14-Network-Diffusion-Infectious-Diseases-R.html#specifying-the-epidemic-model"><i class="fa fa-check"></i><b>14.4</b> Specifying the Epidemic Model</a></li>
<li class="chapter" data-level="14.5" data-path="ch14-Network-Diffusion-Infectious-Diseases-R.html"><a href="ch14-Network-Diffusion-Infectious-Diseases-R.html#running-simulations"><i class="fa fa-check"></i><b>14.5</b> Running Simulations</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="ch14-Network-Diffusion-Infectious-Diseases-R.html"><a href="ch14-Network-Diffusion-Infectious-Diseases-R.html#running-baseline-model"><i class="fa fa-check"></i><b>14.5.1</b> Running Baseline Model</a></li>
<li class="chapter" data-level="14.5.2" data-path="ch14-Network-Diffusion-Infectious-Diseases-R.html"><a href="ch14-Network-Diffusion-Infectious-Diseases-R.html#varying-network-features"><i class="fa fa-check"></i><b>14.5.2</b> Varying Network Features</a></li>
<li class="chapter" data-level="14.5.3" data-path="ch14-Network-Diffusion-Infectious-Diseases-R.html"><a href="ch14-Network-Diffusion-Infectious-Diseases-R.html#varying-epidemic-model"><i class="fa fa-check"></i><b>14.5.3</b> Varying Epidemic Model</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="ch14-Network-Diffusion-Social-Processes-R.html"><a href="ch14-Network-Diffusion-Social-Processes-R.html"><i class="fa fa-check"></i>14, Part 2. Social Diffusion Processes</a>
<ul>
<li class="chapter" data-level="14.6" data-path="ch14-Network-Diffusion-Social-Processes-R.html"><a href="ch14-Network-Diffusion-Social-Processes-R.html#setting-up-the-session-4"><i class="fa fa-check"></i><b>14.6</b> Setting up the Session</a></li>
<li class="chapter" data-level="14.7" data-path="ch14-Network-Diffusion-Social-Processes-R.html"><a href="ch14-Network-Diffusion-Social-Processes-R.html#simple-diffusion-models"><i class="fa fa-check"></i><b>14.7</b> Simple Diffusion Models</a></li>
<li class="chapter" data-level="14.8" data-path="ch14-Network-Diffusion-Social-Processes-R.html"><a href="ch14-Network-Diffusion-Social-Processes-R.html#threshold-models-of-diffusion"><i class="fa fa-check"></i><b>14.8</b> Threshold Models of Diffusion</a>
<ul>
<li class="chapter" data-level="14.8.1" data-path="ch14-Network-Diffusion-Social-Processes-R.html"><a href="ch14-Network-Diffusion-Social-Processes-R.html#simulating-diffusion-processes-using-the-netdiffuser-package"><i class="fa fa-check"></i><b>14.8.1</b> Simulating Diffusion Processes using the netdiffuseR Package</a></li>
<li class="chapter" data-level="14.8.2" data-path="ch14-Network-Diffusion-Social-Processes-R.html"><a href="ch14-Network-Diffusion-Social-Processes-R.html#comparing-diffusion-under-different-network-and-adoption-behavior-conditions"><i class="fa fa-check"></i><b>14.8.2</b> Comparing Diffusion under Different Network and Adoption Behavior Conditions</a></li>
<li class="chapter" data-level="14.8.3" data-path="ch14-Network-Diffusion-Social-Processes-R.html"><a href="ch14-Network-Diffusion-Social-Processes-R.html#simulations-using-multiple-runs"><i class="fa fa-check"></i><b>14.8.3</b> Simulations using Multiple Runs</a></li>
</ul></li>
<li class="chapter" data-level="14.9" data-path="ch14-Network-Diffusion-Social-Processes-R.html"><a href="ch14-Network-Diffusion-Social-Processes-R.html#working-with-empirical-data"><i class="fa fa-check"></i><b>14.9</b> Working with Empirical Data</a></li>
</ul></li>
<li class="chapter" data-level="15" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html"><i class="fa fa-check"></i><b>15</b> Social Influence: Coevolution of Networks and Behaviors</a>
<ul>
<li class="chapter" data-level="15.1" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#reading-in-classroom-data"><i class="fa fa-check"></i><b>15.1</b> Reading in Classroom Data</a></li>
<li class="chapter" data-level="15.2" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#siena-model-setup"><i class="fa fa-check"></i><b>15.2</b> SIENA Model Setup</a></li>
<li class="chapter" data-level="15.3" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#model-specification"><i class="fa fa-check"></i><b>15.3</b> Model Specification</a>
<ul>
<li class="chapter" data-level="15.3.1" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#model-specification-behavioral-model"><i class="fa fa-check"></i><b>15.3.1</b> Model Specification: Behavioral Model</a></li>
<li class="chapter" data-level="15.3.2" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#model-specification-network-model"><i class="fa fa-check"></i><b>15.3.2</b> Model Specification: Network Model</a></li>
</ul></li>
<li class="chapter" data-level="15.4" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#model-estimation"><i class="fa fa-check"></i><b>15.4</b> Model Estimation</a></li>
<li class="chapter" data-level="15.5" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#interpretation"><i class="fa fa-check"></i><b>15.5</b> Interpretation</a>
<ul>
<li class="chapter" data-level="15.5.1" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#interpreting-network-model"><i class="fa fa-check"></i><b>15.5.1</b> Interpreting Network Model</a></li>
<li class="chapter" data-level="15.5.2" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#interpreting-behavioral-model"><i class="fa fa-check"></i><b>15.5.2</b> Interpreting Behavioral Model</a></li>
</ul></li>
<li class="chapter" data-level="15.6" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#checking-model-fit-1"><i class="fa fa-check"></i><b>15.6</b> Checking Model Fit</a></li>
<li class="chapter" data-level="15.7" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#example-with-3-time-periods"><i class="fa fa-check"></i><b>15.7</b> Example with 3 Time Periods</a>
<ul>
<li class="chapter" data-level="15.7.1" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#model-specification-and-estimation"><i class="fa fa-check"></i><b>15.7.1</b> Model Specification and Estimation</a></li>
<li class="chapter" data-level="15.7.2" data-path="ch15-coevolution-networks-behaviors-siena-saom-R.html"><a href="ch15-coevolution-networks-behaviors-siena-saom-R.html#time-heterogeneity"><i class="fa fa-check"></i><b>15.7.2</b> Time Heterogeneity</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="" data-path="how-to-cite.html"><a href="how-to-cite.html"><i class="fa fa-check"></i>How to Cite</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Network Analysis: Integrating Social Network Theory, Method, and Application with R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="ch6-Ego-Network-Data-R" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">6</span> Ego Network Data<a href="ch6-Ego-Network-Data-R.html#ch6-Ego-Network-Data-R" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this tutorial, we will go over how to analyze ego network data in R. Unlike in Chapters 3-5, this tutorial will offer a more in-depth substantive example, where we use ego network data to answer a series of research questions. We will begin by covering the basics of ego network data, utilizing the <strong>egor</strong> package <span class="citation">(Krenz et al. 2023)</span> to manipulate, construct and visualize ego networks (similar to the previous tutorials, but for ego network data). We will then turn to an example analysis, focusing on substantive questions related to homophily, the tendency for similar actors to interact at higher rates than dissimilar actors. We will also consider an example where the ego network properties are used to predict other outcomes of interest, like happiness.</p>
<div id="working-with-ego-network-data" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Working with Ego Network Data<a href="ch6-Ego-Network-Data-R.html#working-with-ego-network-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Ego network data are based on a sample of individuals and are commonly used in the social sciences. Each respondent (ego) reports on the people (alters) they are connected to, providing the local network around the focal respondent. Ego network data offer only pieces of the whole network, as there is typically no way of knowing if the alters named by one respondent are the same alters named by another. Ego network data thus require a somewhat different approach than with sociocentric network data. Most clearly, we must conceptually separate the information about the egos from information about the named alters, which is typically provided by ego. Ego network data can be structured in a number of ways but will generally have 4 kinds of information:</p>
<ul>
<li>first, demographic, behavioral, etc. information on the egos</li>
<li>second, demographic, behavioral, etc. information on the named alters</li>
<li>third, information about the relationship between ego and alter</li>
<li>fourth, information about the relationships between the alters.</li>
</ul>
<p>Our example ego network data come from the 1985 General Social Survey ego network module. The GSS is a nationally representative survey that is fielded yearly, including basic demographic information, socio-economic measures and the like. In addition to the core survey given each year, the GSS will include rotating modules, including occasional modules on social networks. Here, we will work with ego network data from the GSS that has been preprocessed into three different files: a file with the ego attributes; a file with the alter attributes; and a file with the alter-alter ties. At the end of this tutorial, we will consider an example that uses a single file as the input data. Let's go ahead and read in the three files, starting with the ego attribute data (read in from a URL).</p>
<div class="sourceCode" id="cb366"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb366-1"><a href="ch6-Ego-Network-Data-R.html#cb366-1" aria-hidden="true" tabindex="-1"></a>url1 <span class="ot">&lt;-</span> <span class="st">&quot;https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/gss1985_ego_dat.csv&quot;</span></span>
<span id="cb366-2"><a href="ch6-Ego-Network-Data-R.html#cb366-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb366-3"><a href="ch6-Ego-Network-Data-R.html#cb366-3" aria-hidden="true" tabindex="-1"></a>ego_dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> url1, <span class="at">stringsAsFactors =</span> F) </span></code></pre></div>
<p>And here we look at the first 10 rows of the ego data frame, focusing on some of the key columns of interest.</p>
<div class="sourceCode" id="cb367"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb367-1"><a href="ch6-Ego-Network-Data-R.html#cb367-1" aria-hidden="true" tabindex="-1"></a>ego_dat[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">c</span>(<span class="st">&quot;CASEID&quot;</span>, <span class="st">&quot;AGE&quot;</span>, <span class="st">&quot;EDUC&quot;</span>, <span class="st">&quot;RACE&quot;</span>, <span class="st">&quot;SEX&quot;</span>, <span class="st">&quot;HAPPY&quot;</span>, <span class="st">&quot;NUMGIVEN&quot;</span>)]</span></code></pre></div>
<pre><code>##      CASEID AGE EDUC  RACE    SEX HAPPY NUMGIVEN
## 1  19850001  33   16 white   male     2        6
## 2  19850002  49   19 white   male     2        6
## 3  19850003  23   16 white female     2        5
## 4  19850004  26   20 white female     2        5
## 5  19850005  24   17 white female     2        5
## 6  19850006  45   17 white   male     2        4
## 7  19850007  44   18 white female     2        6
## 8  19850008  56   12 white female     2        5
## 9  19850009  85    7 white female     2        2
## 10 19850010  65   12 white female     2        2</code></pre>
<p>We see a number of variables that correspond to the attributes of ego. <code>CASEID</code>, for example, is the unique id for each respondent. We see demographic variables, like <code>AGE</code> and <code>EDUC</code>, as well as variables like <code>HAPPY</code> that correspond to important outcomes of interest. <code>NUMGIVEN</code> captures the number of alters named (capped at 6+). Note that respondents could say they had 6+ alters but were only allowed to report on 5. There are also cases in the data that have NAs for <code>NUMGIVEN</code>, which means they did not answer the network portion of the survey. Here we remove them from the data frame.</p>
<div class="sourceCode" id="cb369"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb369-1"><a href="ch6-Ego-Network-Data-R.html#cb369-1" aria-hidden="true" tabindex="-1"></a>ego_dat <span class="ot">&lt;-</span> ego_dat[<span class="sc">!</span><span class="fu">is.na</span>(ego_dat<span class="sc">$</span>NUMGIVEN), ]</span></code></pre></div>
<p>Now, let's read in the alter attribute data.</p>
<div class="sourceCode" id="cb370"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb370-1"><a href="ch6-Ego-Network-Data-R.html#cb370-1" aria-hidden="true" tabindex="-1"></a>url2 <span class="ot">&lt;-</span> <span class="st">&quot;https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/gss1985_alter_dat.csv&quot;</span></span>
<span id="cb370-2"><a href="ch6-Ego-Network-Data-R.html#cb370-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb370-3"><a href="ch6-Ego-Network-Data-R.html#cb370-3" aria-hidden="true" tabindex="-1"></a>alter_dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> url2, <span class="at">stringsAsFactors =</span> F)</span></code></pre></div>
<p>Here we look at the first ten rows and select columns of the alter attribute data.</p>
<div class="sourceCode" id="cb371"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb371-1"><a href="ch6-Ego-Network-Data-R.html#cb371-1" aria-hidden="true" tabindex="-1"></a>alter_dat[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, <span class="fu">c</span>(<span class="st">&quot;CASEID&quot;</span>, <span class="st">&quot;ALTERID&quot;</span>, <span class="st">&quot;AGE&quot;</span>, <span class="st">&quot;EDUC&quot;</span>, <span class="st">&quot;RACE&quot;</span>, <span class="st">&quot;SEX&quot;</span>, <span class="st">&quot;KIN&quot;</span>)] </span></code></pre></div>
<pre><code>##      CASEID ALTERID AGE EDUC  RACE    SEX KIN
## 1  19850001       1  32   18 white   male   0
## 2  19850001       2  29   16 white female   1
## 3  19850001       3  32   18 white   male   0
## 4  19850001       4  35   16 white   male   1
## 5  19850001       5  29   13 white female   0
## 6  19850002       1  42   12 white female   1
## 7  19850002       2  44   18 white   male   0
## 8  19850002       3  45   16 white   male   0
## 9  19850002       4  40   12 white female   0
## 10 19850002       5  50   18 white   male   0</code></pre>
<p>The data look similar to the ego data frame but there are important differences. In this case, each row corresponds to a different named alter. Each alter is denoted by an alter id (<code>ALTERID</code>), unique to that respondent (based on <code>CASEID</code>). We see similar attributes as with the ego data. There is also information on the relationship between ego and each alter. For example, the <code>KIN</code> variable shows if ego is kin with that alter. As an example, we can see that respondent 1 (CASEID = 19850001) names 5 alters. The first alter (ALTERID = 1) is 32, has 18 years of education, and is not kin to ego. Note that the number of rows in the two data frames is not the same.</p>
<div class="sourceCode" id="cb373"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb373-1"><a href="ch6-Ego-Network-Data-R.html#cb373-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(ego_dat)</span></code></pre></div>
<pre><code>## [1] 1531</code></pre>
<div class="sourceCode" id="cb375"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb375-1"><a href="ch6-Ego-Network-Data-R.html#cb375-1" aria-hidden="true" tabindex="-1"></a><span class="fu">nrow</span>(alter_dat)</span></code></pre></div>
<pre><code>## [1] 4483</code></pre>
<p>We can see that there are 1531 respondents in the ego data frame and 4483 alters in the alter data frame. Finally, we read in the alter-alter tie data.</p>
<div class="sourceCode" id="cb377"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb377-1"><a href="ch6-Ego-Network-Data-R.html#cb377-1" aria-hidden="true" tabindex="-1"></a>url3 <span class="ot">&lt;-</span> <span class="st">&quot;https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/gss1985_alteralter_dat.csv&quot;</span></span>
<span id="cb377-2"><a href="ch6-Ego-Network-Data-R.html#cb377-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb377-3"><a href="ch6-Ego-Network-Data-R.html#cb377-3" aria-hidden="true" tabindex="-1"></a>alteralter_dat <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> url3)</span></code></pre></div>
<div class="sourceCode" id="cb378"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb378-1"><a href="ch6-Ego-Network-Data-R.html#cb378-1" aria-hidden="true" tabindex="-1"></a>alteralter_dat[<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>, ]</span></code></pre></div>
<pre><code>##      CASEID ALTER1 ALTER2 WEIGHT
## 1  19850001      1      2      2
## 2  19850001      1      3      1
## 3  19850001      1      4      1
## 4  19850001      1      5      1
## 5  19850001      2      3      2
## 6  19850001      2      4      2
## 7  19850001      2      5      2
## 8  19850001      3      4      1
## 9  19850001      3      5      1
## 10 19850001      4      5      1</code></pre>
<p>This data frame captures the ties between the named alters (as reported on by the respondent). We see four columns. The first column defines the relevant ego using <code>CASEID</code>. <code>ALTER1</code> defines the first alter in the dyad and <code>ALTER2</code> defines the second. These ids must correspond to the <code>ALTERID</code> on the alter data. <code>Weight</code> defines the nature of the relationship. A value of 1 means that the alters know each other while a value of 2 means they are especially close. If there is no relationship between i and j then that dyad will not show up in this data frame.</p>
<p>Our main substantive question is about the strength of homophily on different demographic dimensions. Homophily is a fundamental feature of social networks, as individuals tend to interact with similar others. Homophily in networks emerges because of opportunities (e.g., individuals with higher incomes may live in similar neighborhoods, belong to the same clubs, etc.), differences in resources across groups, and preferences (people select friends who are similar to themselves). By examining ego network data, we can uncover quite a bit about the social boundaries that exist in society. We can ask, for example, if race is a more important social dimension than say, gender. This would be reflected in the fact that cross-race ties are rare while cross-gender ties are comparatively common. We may also want to know how the strength of homophily varies across kinds of relationships; for example kin compared to non-kin ties. This is important when trying to understand how resources, like emotional support and advice, are shared (or not) across groups. Before we dive into examining patterns of homophily, it will be useful to do a bit of data management and network construction using the functions in the <strong>egor</strong> package. We will also do some basic visualizations.</p>
<p>The first challenge in analyzing ego network data is that we must transform traditional survey data into something that has the structure of a network, so that we can then utilize packages like igraph and sna. Our survey data will not look like traditional network inputs (matrices, edgelists, etc.) and each survey is likely to be different, complicating the task of putting together the ego networks. Luckily, the <strong>egor</strong> package has made the task of constructing ego networks from survey data much easier. We will utilize the basic functionality of the <strong>egor</strong> package throughout the tutorial. Let's go ahead and load the package.</p>
<div class="sourceCode" id="cb380"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb380-1"><a href="ch6-Ego-Network-Data-R.html#cb380-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(egor)</span></code></pre></div>
<p>The basic idea is to first construct an egor object from the survey data. We can then use that object to form igraph and/or network objects, to plot the networks and to calculate statistics of interest. The function we will use to construct the egor object is <code>egor()</code>. The <code>egor()</code> function assumes that you are inputting the data using three separate files. The main arguments are:</p>
<ul>
<li>alters = alter attributes data frame</li>
<li>egos = ego attributes data frame</li>
<li>aaties = alter-alter tie data frame</li>
<li>alter_design = list of arguments to specify nomination information from survey</li>
<li>ego_design = list of arguments to specify survey design of study</li>
<li>ID.vars = list of variable names corresponding to key columns:
<ul>
<li>ego = variable name for id of ego</li>
<li>alter = variable name for id of alter (in alter data)</li>
<li>source = variable name for 'sender' of tie in alter-alter data</li>
<li>target = variable name for 'receiver' of tie in alter-alter data</li>
</ul></li>
</ul>
<p>Here, we will use the three data frames read in above as the main inputs. We will also tell R that <code>CASEID</code> is the ego id variable and <code>ALTERID</code> is the id variable for alters, while <code>ALTER1</code> and <code>ALTER2</code> are the source/target variables in the alter-alter data frame. We also note that the maximum number of alters was set to 5. It is also possible to incorporate features of the survey, like sampling weights and strata, into the constructed egor object. For the sake of simplicity, we will not include these features here, but a researcher may want to in more formal analyses.</p>
<div class="sourceCode" id="cb381"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb381-1"><a href="ch6-Ego-Network-Data-R.html#cb381-1" aria-hidden="true" tabindex="-1"></a>egonetlist <span class="ot">&lt;-</span>  <span class="fu">egor</span>(<span class="at">alters =</span> alter_dat, <span class="at">egos =</span> ego_dat, </span>
<span id="cb381-2"><a href="ch6-Ego-Network-Data-R.html#cb381-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">aaties =</span> alteralter_dat, <span class="at">alter_design =</span> <span class="fu">list</span>(<span class="at">max =</span> <span class="dv">5</span>), </span>
<span id="cb381-3"><a href="ch6-Ego-Network-Data-R.html#cb381-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ID.vars =</span> <span class="fu">list</span>(<span class="at">ego =</span> <span class="st">&quot;CASEID&quot;</span>, <span class="at">alter =</span><span class="st">&quot;ALTERID&quot;</span>, </span>
<span id="cb381-4"><a href="ch6-Ego-Network-Data-R.html#cb381-4" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">source =</span> <span class="st">&quot;ALTER1&quot;</span>, <span class="at">target =</span> <span class="st">&quot;ALTER2&quot;</span>)) </span></code></pre></div>
<div class="sourceCode" id="cb382"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb382-1"><a href="ch6-Ego-Network-Data-R.html#cb382-1" aria-hidden="true" tabindex="-1"></a>egonetlist</span></code></pre></div>
<pre><code>## # EGO data (active): 1,531 × 13
##     .egoID   AGE  EDUC RACE  SEX    RELIG    AGE_CATEGORICAL EDUC_CATEGORICAL NUMGIVEN HAPPY HEALTH PARTYID WTSSALL
## *    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;               &lt;int&gt; &lt;int&gt;  &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt;
## 1 19850001    33    16 white male   jewish   30s             College                 6     2      2       1   1.04 
## 2 19850002    49    19 white male   catholic 40s             Post Graduate           6     2      1       4   1.04 
## 3 19850003    23    16 white female jewish   20s             College                 5     2      1       1   1.04 
## 4 19850004    26    20 white female jewish   20s             Post Graduate           5     2      2       0   0.518
## 5 19850005    24    17 white female catholic 20s             Post Graduate           5     2      2       2   0.518
## # ℹ 1,526 more rows
## # ALTER data: 4,483 × 12
##   .altID   .egoID   AGE  EDUC RACE  SEX    RELIG      AGE_CATEGORICAL EDUC_CATEGORICAL TALKTO SPOUSE   KIN
## *  &lt;int&gt;    &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;      &lt;chr&gt;           &lt;chr&gt;             &lt;int&gt;  &lt;int&gt; &lt;int&gt;
## 1      1 19850001    32    18 white male   jewish     30s             Post Graduate         2      2     0
## 2      2 19850001    29    16 white female protestant 20s             College               1      1     1
## 3      3 19850001    32    18 white male   jewish     30s             Post Graduate         3      2     0
## # ℹ 4,480 more rows
## # AATIE data: 4,880 × 4
##     .egoID .srcID .tgtID WEIGHT
## *    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
## 1 19850001      1      2      2
## 2 19850001      1      3      1
## 3 19850001      1      4      1
## # ℹ 4,877 more rows</code></pre>
<p>egor objects are constructed as tibbles, which are data frames built using the tidyverse logic. For those versed in the tidyverse, one can take advantage of all the functions, calls, etc. that go along with those kinds of objects. It is, however, not strictly necessary to know the syntax of the tidyverse to work with egor objects. Let's take a look at the egor object.</p>
<div class="sourceCode" id="cb384"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb384-1"><a href="ch6-Ego-Network-Data-R.html#cb384-1" aria-hidden="true" tabindex="-1"></a><span class="fu">names</span>(egonetlist) </span></code></pre></div>
<pre><code>## [1] &quot;ego&quot;   &quot;alter&quot; &quot;aatie&quot;</code></pre>
<p>We can see that the elements are made up of our three data frames. For example, here we look at the ego data, extracted from the egor object (just looking at the first five columns).</p>
<div class="sourceCode" id="cb386"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb386-1"><a href="ch6-Ego-Network-Data-R.html#cb386-1" aria-hidden="true" tabindex="-1"></a>egonetlist[[<span class="st">&quot;ego&quot;</span>]][, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## # A tibble: 1,531 × 5
##      .egoID   AGE  EDUC RACE  SEX   
##       &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 19850001    33    16 white male  
##  2 19850002    49    19 white male  
##  3 19850003    23    16 white female
##  4 19850004    26    20 white female
##  5 19850005    24    17 white female
##  6 19850006    45    17 white male  
##  7 19850007    44    18 white female
##  8 19850008    56    12 white female
##  9 19850009    85     7 white female
## 10 19850010    65    12 white female
## # ℹ 1,521 more rows</code></pre>
<p>Note that the id variable for ego has been renamed to <code>.egoID</code> (it was <code>CASEID</code> on the original data). Here, we look at the alter attributes (just for the first five columns).</p>
<div class="sourceCode" id="cb388"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb388-1"><a href="ch6-Ego-Network-Data-R.html#cb388-1" aria-hidden="true" tabindex="-1"></a>egonetlist[[<span class="st">&quot;alter&quot;</span>]][, <span class="dv">1</span><span class="sc">:</span><span class="dv">5</span>]</span></code></pre></div>
<pre><code>## # A tibble: 4,483 × 5
##    .altID   .egoID   AGE  EDUC RACE 
##     &lt;int&gt;    &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;
##  1      1 19850001    32    18 white
##  2      2 19850001    29    16 white
##  3      3 19850001    32    18 white
##  4      4 19850001    35    16 white
##  5      5 19850001    29    13 white
##  6      1 19850002    42    12 white
##  7      2 19850002    44    18 white
##  8      3 19850002    45    16 white
##  9      4 19850002    40    12 white
## 10      5 19850002    50    18 white
## # ℹ 4,473 more rows</code></pre>
<p>We can see that the alter id has been renamed <code>.altID</code> (from <code>ALTERID</code> on the original data). And now we look at the alter-alter ties.</p>
<div class="sourceCode" id="cb390"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb390-1"><a href="ch6-Ego-Network-Data-R.html#cb390-1" aria-hidden="true" tabindex="-1"></a>egonetlist[[<span class="st">&quot;aatie&quot;</span>]]</span></code></pre></div>
<pre><code>## # A tibble: 4,880 × 4
##      .egoID .srcID .tgtID WEIGHT
##       &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
##  1 19850001      1      2      2
##  2 19850001      1      3      1
##  3 19850001      1      4      1
##  4 19850001      1      5      1
##  5 19850001      2      3      2
##  6 19850001      2      4      2
##  7 19850001      2      5      2
##  8 19850001      3      4      1
##  9 19850001      3      5      1
## 10 19850001      4      5      1
## # ℹ 4,870 more rows</code></pre>
<p>We can see that the column names for the alter-alter ties have also been renamed from the input data. The variables are now <code>.srcID</code> and <code>.tgtID</code> (rather than <code>ALTER1</code> and <code>ALTER2</code>, as on the original data).</p>
<p>Let's begin by calculating a simple summary statistic on our egor object. We will begin with density, showing the proportion of alter-alter ties that exist in each ego network, relative to the number of possible ties (note that all ego networks of size 0 or 1 will have NAs for density). The function is <code>ego_density()</code>.</p>
<div class="sourceCode" id="cb392"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb392-1"><a href="ch6-Ego-Network-Data-R.html#cb392-1" aria-hidden="true" tabindex="-1"></a>dens <span class="ot">&lt;-</span> <span class="fu">ego_density</span>(egonetlist)</span></code></pre></div>
<div class="sourceCode" id="cb393"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb393-1"><a href="ch6-Ego-Network-Data-R.html#cb393-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(dens)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##     .egoID density
##      &lt;int&gt;   &lt;dbl&gt;
## 1 19850001   1    
## 2 19850002   0.8  
## 3 19850003   0.6  
## 4 19850004   0.6  
## 5 19850005   1    
## 6 19850006   0.667</code></pre>
<p>The density scores are stored in the object as <code>density</code>. For example, respondent 1 (19850001) has 5 alters and all 10 possible ties exist (density = 1), while respondent 2 (1950002) has 5 alters but only 8 ties exist (density = .8). To check:</p>
<div class="sourceCode" id="cb395"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb395-1"><a href="ch6-Ego-Network-Data-R.html#cb395-1" aria-hidden="true" tabindex="-1"></a>alteralter_dat[alteralter_dat<span class="sc">$</span>CASEID <span class="sc">==</span> <span class="dv">19850001</span>, ]</span></code></pre></div>
<pre><code>##      CASEID ALTER1 ALTER2 WEIGHT
## 1  19850001      1      2      2
## 2  19850001      1      3      1
## 3  19850001      1      4      1
## 4  19850001      1      5      1
## 5  19850001      2      3      2
## 6  19850001      2      4      2
## 7  19850001      2      5      2
## 8  19850001      3      4      1
## 9  19850001      3      5      1
## 10 19850001      4      5      1</code></pre>
<div class="sourceCode" id="cb397"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb397-1"><a href="ch6-Ego-Network-Data-R.html#cb397-1" aria-hidden="true" tabindex="-1"></a>alteralter_dat[alteralter_dat<span class="sc">$</span>CASEID <span class="sc">==</span> <span class="dv">19850002</span>, ]</span></code></pre></div>
<pre><code>##      CASEID ALTER1 ALTER2 WEIGHT
## 11 19850002      1      2      1
## 12 19850002      1      3      1
## 13 19850002      1      4      2
## 14 19850002      1      5      2
## 15 19850002      2      4      2
## 16 19850002      3      4      2
## 17 19850002      3      5      1
## 18 19850002      4      5      2</code></pre>
</div>
<div id="plotting-networks" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Plotting Networks<a href="ch6-Ego-Network-Data-R.html#plotting-networks" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Here will go over how to plot the ego networks using packages like <strong>igraph</strong>. Plotting the ego networks will give us an initial view of the data and will help inform the analysis to come.</p>
<div class="sourceCode" id="cb399"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb399-1"><a href="ch6-Ego-Network-Data-R.html#cb399-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(igraph)</span></code></pre></div>
<p>The first step in making use of the functionality of igraph is to convert the information in the egor object to igraph objects. We do this using the <code>as_igraph()</code> function. We would use an <code>as_network()</code> function if we wanted to construct networks in the network format.</p>
<div class="sourceCode" id="cb400"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb400-1"><a href="ch6-Ego-Network-Data-R.html#cb400-1" aria-hidden="true" tabindex="-1"></a>igraph_nets <span class="ot">&lt;-</span> <span class="fu">as_igraph</span>(egonetlist)</span></code></pre></div>
<p>Now, let’s take a look at the first three ego networks.</p>
<div class="sourceCode" id="cb401"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb401-1"><a href="ch6-Ego-Network-Data-R.html#cb401-1" aria-hidden="true" tabindex="-1"></a>igraph_nets[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>] </span></code></pre></div>
<pre><code>## $`19850001`
## IGRAPH e803cb6 UN-- 5 10 -- 
## + attr: .egoID (g/n), name (v/c), AGE (v/n), EDUC (v/n), RACE (v/c), SEX (v/c), RELIG (v/c), AGE_CATEGORICAL (v/c), EDUC_CATEGORICAL (v/c), TALKTO (v/n), SPOUSE (v/n), KIN (v/n), WEIGHT (e/n)
## + edges from e803cb6 (vertex names):
##  [1] 1--2 1--3 1--4 1--5 2--3 2--4 2--5 3--4 3--5 4--5
## 
## $`19850002`
## IGRAPH e5a3b7e UN-- 5 8 -- 
## + attr: .egoID (g/n), name (v/c), AGE (v/n), EDUC (v/n), RACE (v/c), SEX (v/c), RELIG (v/c), AGE_CATEGORICAL (v/c), EDUC_CATEGORICAL (v/c), TALKTO (v/n), SPOUSE (v/n), KIN (v/n), WEIGHT (e/n)
## + edges from e5a3b7e (vertex names):
## [1] 1--2 1--3 1--4 1--5 2--4 3--4 3--5 4--5
## 
## $`19850003`
## IGRAPH b56831d UN-- 5 6 -- 
## + attr: .egoID (g/n), name (v/c), AGE (v/n), EDUC (v/n), RACE (v/c), SEX (v/c), RELIG (v/c), AGE_CATEGORICAL (v/c), EDUC_CATEGORICAL (v/c), TALKTO (v/n), SPOUSE (v/n), KIN (v/n), WEIGHT (e/n)
## + edges from b56831d (vertex names):
## [1] 1--2 1--3 1--4 2--3 2--4 3--4</code></pre>
<p>We have a list of ego networks (in the igraph format), with each ego network in a different element in the list. We can see that the information on the alters was automatically passed to the igraph objects, as was the information on the weights for the alter-alter ties. Note that by default the igraph objects will not include ego. Ego is often (but not always) excluded from visualizations and calculations because ego is, by definition, tied to all alters. Including ego thus offers little additional structural information. We will consider measures below that incorporate both ego and alter information (see Section 6.3).</p>
<p>As with all igraph objects, we can extract useful information, like the attributes of the nodes. As an example, let's extract information on sex of alters from the first ego network.</p>
<div class="sourceCode" id="cb403"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb403-1"><a href="ch6-Ego-Network-Data-R.html#cb403-1" aria-hidden="true" tabindex="-1"></a><span class="fu">vertex_attr</span>(igraph_nets[[<span class="dv">1</span>]], <span class="st">&quot;SEX&quot;</span>)</span></code></pre></div>
<pre><code>## [1] &quot;male&quot;   &quot;female&quot; &quot;male&quot;   &quot;male&quot;   &quot;female&quot;</code></pre>
<p>This is the same information as:</p>
<div class="sourceCode" id="cb405"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb405-1"><a href="ch6-Ego-Network-Data-R.html#cb405-1" aria-hidden="true" tabindex="-1"></a>alter_dat[alter_dat<span class="sc">$</span>CASEID <span class="sc">==</span> <span class="dv">19850001</span>, <span class="st">&quot;SEX&quot;</span>]</span></code></pre></div>
<pre><code>## [1] &quot;male&quot;   &quot;female&quot; &quot;male&quot;   &quot;male&quot;   &quot;female&quot;</code></pre>
<p>Now, let's plot a couple of example networks, focusing on the first 3 ego networks.</p>
<div class="sourceCode" id="cb407"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb407-1"><a href="ch6-Ego-Network-Data-R.html#cb407-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span>
<span id="cb407-2"><a href="ch6-Ego-Network-Data-R.html#cb407-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">walk</span>(igraph_nets[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], plot)</span></code></pre></div>
<p><img src="Chapter6_Integrated_Network_Science_Rtutorial_egonetworks_files/figure-html/unnamed-chunk-24-1.png" width="672" /></p>
<p>It is also possible to generate the code using lapply: <code>lapply(igraph_nets[1:3], plot)</code>. <code>lapply()</code> will perform a given function, here <code>plot()</code>, over every element of an input list, here the first three elements of <code>igraph_nets</code>.</p>
<p>Now, let's see if we can color the nodes to make the plot more informative. Let's color the nodes based on gender, so we can get a sense of the level of gender homogeneity in these ego networks. This is a somewhat more difficult task than with a single network (see visualization lab), as we need to extract and use the gender attributes over multiple networks. Here we will write a little function to perform this task and then apply it over the first three ego networks.</p>
<div class="sourceCode" id="cb408"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb408-1"><a href="ch6-Ego-Network-Data-R.html#cb408-1" aria-hidden="true" tabindex="-1"></a>plotfunc_colorgender <span class="ot">&lt;-</span> <span class="cf">function</span>(nets){ </span>
<span id="cb408-2"><a href="ch6-Ego-Network-Data-R.html#cb408-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Arguments: </span></span>
<span id="cb408-3"><a href="ch6-Ego-Network-Data-R.html#cb408-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># nets: ego network of interest</span></span>
<span id="cb408-4"><a href="ch6-Ego-Network-Data-R.html#cb408-4" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb408-5"><a href="ch6-Ego-Network-Data-R.html#cb408-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># extracting the attribute from the ego network:</span></span>
<span id="cb408-6"><a href="ch6-Ego-Network-Data-R.html#cb408-6" aria-hidden="true" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">vertex_attr</span>(nets, <span class="st">&quot;SEX&quot;</span>) </span>
<span id="cb408-7"><a href="ch6-Ego-Network-Data-R.html#cb408-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb408-8"><a href="ch6-Ego-Network-Data-R.html#cb408-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># now we use an ifelse statement to set color,</span></span>
<span id="cb408-9"><a href="ch6-Ego-Network-Data-R.html#cb408-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># light sky blue if gender equals female, blue otherwise:</span></span>
<span id="cb408-10"><a href="ch6-Ego-Network-Data-R.html#cb408-10" aria-hidden="true" tabindex="-1"></a>  cols <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(cols <span class="sc">==</span> <span class="st">&quot;female&quot;</span>, <span class="st">&quot;lightskyblue&quot;</span>, <span class="st">&quot;blue&quot;</span>)</span>
<span id="cb408-11"><a href="ch6-Ego-Network-Data-R.html#cb408-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb408-12"><a href="ch6-Ego-Network-Data-R.html#cb408-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># plotting ego network with nodes colored based on gender:</span></span>
<span id="cb408-13"><a href="ch6-Ego-Network-Data-R.html#cb408-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">plot</span>(nets, <span class="at">vertex.color =</span> cols) </span>
<span id="cb408-14"><a href="ch6-Ego-Network-Data-R.html#cb408-14" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now let’s run <code>plotfunc_colorgender()</code> over the first three ego networks.</p>
<div class="sourceCode" id="cb409"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb409-1"><a href="ch6-Ego-Network-Data-R.html#cb409-1" aria-hidden="true" tabindex="-1"></a><span class="fu">par</span>(<span class="at">mfrow =</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>))</span>
<span id="cb409-2"><a href="ch6-Ego-Network-Data-R.html#cb409-2" aria-hidden="true" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">walk</span>(igraph_nets[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>], plotfunc_colorgender)</span></code></pre></div>
<p><img src="Chapter6_Integrated_Network_Science_Rtutorial_egonetworks_files/figure-html/unnamed-chunk-26-1.png" width="672" /></p>
<p>We can see that the third ego network is homogenous in terms of gender, but the first two are quite heterogeneous. We also see different patterns of ties between the named alters. The first ego network is complete, with a tie between all alter-alter pairs. In contrast, the third ego network is less dense, with one alter (id = 5) completely disconnected from the rest of the alters.</p>
</div>
<div id="homophily-ego-alter-attributes" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Homophily: Ego-Alter Attributes<a href="ch6-Ego-Network-Data-R.html#homophily-ego-alter-attributes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We now move to our substantive questions about the strength and patterning of homophily. We will focus on gender and racial homophily, comparing across kin and non-kin ties. The first part of the analysis (Section 6.3.1 and 6.3.2) will utilize the ego-alter information, looking at the level of similarity between ego and alter for each ego network.</p>
<div id="proportion-of-alters-matching-ego" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> Proportion of Alters Matching Ego<a href="ch6-Ego-Network-Data-R.html#proportion-of-alters-matching-ego" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>We will begin by calculating ego-level summary measures. Our first measure of interest, calculated for each ego, is the proportion of alters that ego matches on for the attribute of interest. For example, if ego is male, what proportion of the named alters are also male?</p>
<p>The <strong>egor</strong> package has a number of built-in functions, like <code>ego_density()</code>, that make it easy to calculate summary statistics. In many cases, however, we will want to calculate a measure that is not currently included in <strong>egor</strong>. In this case, we can write our own function and then apply it to the egor object using a <code>comp_ply()</code> function (part of the <strong>egor</strong> package). That is what we will do here. Let's first write a little function that will compare ego's attribute to the attributes of the alters and calculate the proportion of times they match.</p>
<div class="sourceCode" id="cb410"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb410-1"><a href="ch6-Ego-Network-Data-R.html#cb410-1" aria-hidden="true" tabindex="-1"></a>prop_same_function <span class="ot">&lt;-</span> <span class="cf">function</span>(alt.attr, ego.attr){</span>
<span id="cb410-2"><a href="ch6-Ego-Network-Data-R.html#cb410-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb410-3"><a href="ch6-Ego-Network-Data-R.html#cb410-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Arguments:</span></span>
<span id="cb410-4"><a href="ch6-Ego-Network-Data-R.html#cb410-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># alt.attr: alter attributes for a given ego</span></span>
<span id="cb410-5"><a href="ch6-Ego-Network-Data-R.html#cb410-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ego.attr: ego attributes</span></span>
<span id="cb410-6"><a href="ch6-Ego-Network-Data-R.html#cb410-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb410-7"><a href="ch6-Ego-Network-Data-R.html#cb410-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># taking ego attribute and comparing to alter </span></span>
<span id="cb410-8"><a href="ch6-Ego-Network-Data-R.html#cb410-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># attributes, summing up number of times they match</span></span>
<span id="cb410-9"><a href="ch6-Ego-Network-Data-R.html#cb410-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># ignoring missing data:</span></span>
<span id="cb410-10"><a href="ch6-Ego-Network-Data-R.html#cb410-10" aria-hidden="true" tabindex="-1"></a>  same <span class="ot">&lt;-</span> <span class="fu">sum</span>(ego.attr <span class="sc">==</span> alt.attr, <span class="at">na.rm =</span> T) </span>
<span id="cb410-11"><a href="ch6-Ego-Network-Data-R.html#cb410-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb410-12"><a href="ch6-Ego-Network-Data-R.html#cb410-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># calculating proportion of ego-alter pairs that match:</span></span>
<span id="cb410-13"><a href="ch6-Ego-Network-Data-R.html#cb410-13" aria-hidden="true" tabindex="-1"></a>  <span class="co"># just for alters with no missing data</span></span>
<span id="cb410-14"><a href="ch6-Ego-Network-Data-R.html#cb410-14" aria-hidden="true" tabindex="-1"></a>  prop_same <span class="ot">&lt;-</span> same <span class="sc">/</span> <span class="fu">sum</span>(<span class="sc">!</span><span class="fu">is.na</span>(alt.attr))</span>
<span id="cb410-15"><a href="ch6-Ego-Network-Data-R.html#cb410-15" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb410-16"><a href="ch6-Ego-Network-Data-R.html#cb410-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># making sure if ego is missing, then prop_same is also missing</span></span>
<span id="cb410-17"><a href="ch6-Ego-Network-Data-R.html#cb410-17" aria-hidden="true" tabindex="-1"></a>  prop_same[<span class="fu">is.na</span>(ego.attr)] <span class="ot">&lt;-</span> <span class="cn">NA</span></span>
<span id="cb410-18"><a href="ch6-Ego-Network-Data-R.html#cb410-18" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb410-19"><a href="ch6-Ego-Network-Data-R.html#cb410-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(prop_same) </span>
<span id="cb410-20"><a href="ch6-Ego-Network-Data-R.html#cb410-20" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
<p>Note that any ego with no alters or with missing data for the alter attributes will return an NA.</p>
<p>We start by looking at the gender variable for all ties, including both kin and non-kin ties. We will calculate the proportion matching on gender by using our function (<code>prop_same_function()</code>) within a <code>comp_ply()</code> function. The main arguments to <code>comp_ply()</code> are:</p>
<ul>
<li>the ego object</li>
<li>alt.attr = the alter attribute of interest</li>
<li>.f = the function of interest</li>
<li>ego.attr = the ego attribute of interest, if required</li>
</ul>
<p>Here the alter and ego attribute are <code>SEX</code> and the function of interest is <code>prop_same_function()</code>.</p>
<div class="sourceCode" id="cb411"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb411-1"><a href="ch6-Ego-Network-Data-R.html#cb411-1" aria-hidden="true" tabindex="-1"></a>pmatch_sex <span class="ot">&lt;-</span> <span class="fu">comp_ply</span>(egonetlist, <span class="at">alt.attr =</span> <span class="st">&quot;SEX&quot;</span>, <span class="at">.f =</span> prop_same_function, </span>
<span id="cb411-2"><a href="ch6-Ego-Network-Data-R.html#cb411-2" aria-hidden="true" tabindex="-1"></a>                       <span class="at">ego.attr =</span> <span class="st">&quot;SEX&quot;</span>) </span></code></pre></div>
<div class="sourceCode" id="cb412"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb412-1"><a href="ch6-Ego-Network-Data-R.html#cb412-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(pmatch_sex)</span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##     .egoID result
##      &lt;int&gt;  &lt;dbl&gt;
## 1 19850001   0.6 
## 2 19850002   0.6 
## 3 19850003   1   
## 4 19850004   0.4 
## 5 19850005   0.4 
## 6 19850006   0.75</code></pre>
<p>With the <code>comp_ply()</code> function, the calculated values are stored as <code>result</code>. We can see that the first two respondents match with .6 of the alters and the third matches with all of the named alters. We can go back to the raw data to spot check that this is correct. For example, respondent 1 is male (<code>ego_dat[ego_dat$CASEID == 19850001, "SEX"]</code>) and has 3 male and 2 female alters (<code>alter_dat[alter_dat$CASEID == 19850001, "SEX"]</code>), thus matching with .6 of the alters.</p>
<p>Now, let's do the same thing, but only consider ties that are based on kin relations. We still want to calculate homophily for gender, but we will only consider ego-alter pairs that have a kin tie. The first step is to create a new egor object that subsets the alter data to just those cases where a kin relation exists. Here, we will use a <code>subset()</code> function. The main inputs are the original egor object, the condition of interest and the unit to subset on. In this case, the condition of interest is where the <code>KIN</code> variable (on the alter attribute data frame) is equal to 1. The unit is the alter, as we only want to keep some of the alters (those with a kin tie to ego).</p>
<div class="sourceCode" id="cb414"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb414-1"><a href="ch6-Ego-Network-Data-R.html#cb414-1" aria-hidden="true" tabindex="-1"></a>egonetlist_kin <span class="ot">&lt;-</span> <span class="fu">subset</span>(egonetlist, egonetlist[[<span class="st">&quot;alter&quot;</span>]]<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">1</span>, </span>
<span id="cb414-2"><a href="ch6-Ego-Network-Data-R.html#cb414-2" aria-hidden="true" tabindex="-1"></a>                         <span class="at">unit =</span> <span class="st">&quot;alter&quot;</span>) </span></code></pre></div>
<p>Now we rerun our function as before, but use the kin-based egor object.</p>
<div class="sourceCode" id="cb415"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb415-1"><a href="ch6-Ego-Network-Data-R.html#cb415-1" aria-hidden="true" tabindex="-1"></a>pmatch_sex_kin <span class="ot">&lt;-</span> <span class="fu">comp_ply</span>(egonetlist_kin, <span class="at">alt.attr =</span> <span class="st">&quot;SEX&quot;</span>, </span>
<span id="cb415-2"><a href="ch6-Ego-Network-Data-R.html#cb415-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">.f =</span> prop_same_function, <span class="at">ego.attr =</span> <span class="st">&quot;SEX&quot;</span>) </span></code></pre></div>
<p>Here we do the same thing again, but for non-kin relations (so only keeping those alters with a non-kin tie to ego).</p>
<div class="sourceCode" id="cb416"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb416-1"><a href="ch6-Ego-Network-Data-R.html#cb416-1" aria-hidden="true" tabindex="-1"></a>egonetlist_nonkin <span class="ot">&lt;-</span> <span class="fu">subset</span>(egonetlist, egonetlist[[<span class="st">&quot;alter&quot;</span>]]<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">0</span>,</span>
<span id="cb416-2"><a href="ch6-Ego-Network-Data-R.html#cb416-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">unit =</span> <span class="st">&quot;alter&quot;</span>) </span></code></pre></div>
<div class="sourceCode" id="cb417"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb417-1"><a href="ch6-Ego-Network-Data-R.html#cb417-1" aria-hidden="true" tabindex="-1"></a>pmatch_sex_nonkin <span class="ot">&lt;-</span> <span class="fu">comp_ply</span>(egonetlist_nonkin, <span class="at">alt.attr =</span> <span class="st">&quot;SEX&quot;</span>, </span>
<span id="cb417-2"><a href="ch6-Ego-Network-Data-R.html#cb417-2" aria-hidden="true" tabindex="-1"></a>                              <span class="at">.f =</span> prop_same_function, <span class="at">ego.attr =</span> <span class="st">&quot;SEX&quot;</span>)</span></code></pre></div>
<p>And now let's put those vectors together into a single data frame, just extracting the result part of the output.</p>
<div class="sourceCode" id="cb418"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb418-1"><a href="ch6-Ego-Network-Data-R.html#cb418-1" aria-hidden="true" tabindex="-1"></a>sexdat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(pmatch_sex<span class="sc">$</span>result, pmatch_sex_kin<span class="sc">$</span>result, </span>
<span id="cb418-2"><a href="ch6-Ego-Network-Data-R.html#cb418-2" aria-hidden="true" tabindex="-1"></a>                     pmatch_sex_nonkin<span class="sc">$</span>result)</span></code></pre></div>
<div class="sourceCode" id="cb419"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb419-1"><a href="ch6-Ego-Network-Data-R.html#cb419-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sexdat)</span></code></pre></div>
<pre><code>##          pmatch_sex.result pmatch_sex_kin.result pmatch_sex_nonkin.result
## 19850001              0.60                   0.5                0.6666667
## 19850002              0.60                   0.0                0.7500000
## 19850003              1.00                   1.0                1.0000000
## 19850004              0.40                   NaN                0.4000000
## 19850005              0.40                   0.4                      NaN
## 19850006              0.75                   1.0                0.6666667</code></pre>
<p>Each row shows the proportion of alters who have the same gender as ego (one row for each ego). The second and third columns show the results for kin ties and non-kin ties only. Now, we will quickly do the same calculations for race and then compare the results with those for gender. The only inputs that change are the alter and ego attribute name.</p>
<div class="sourceCode" id="cb421"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb421-1"><a href="ch6-Ego-Network-Data-R.html#cb421-1" aria-hidden="true" tabindex="-1"></a>pmatch_race <span class="ot">&lt;-</span> <span class="fu">comp_ply</span>(egonetlist, <span class="at">alt.attr =</span> <span class="st">&quot;RACE&quot;</span>, </span>
<span id="cb421-2"><a href="ch6-Ego-Network-Data-R.html#cb421-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">.f =</span> prop_same_function, <span class="at">ego.attr =</span> <span class="st">&quot;RACE&quot;</span>) <span class="co">#all alters</span></span>
<span id="cb421-3"><a href="ch6-Ego-Network-Data-R.html#cb421-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb421-4"><a href="ch6-Ego-Network-Data-R.html#cb421-4" aria-hidden="true" tabindex="-1"></a>pmatch_race_kin <span class="ot">&lt;-</span> <span class="fu">comp_ply</span>(egonetlist_kin, <span class="at">alt.attr =</span> <span class="st">&quot;RACE&quot;</span>, </span>
<span id="cb421-5"><a href="ch6-Ego-Network-Data-R.html#cb421-5" aria-hidden="true" tabindex="-1"></a>                            <span class="at">.f =</span> prop_same_function, <span class="at">ego.attr =</span> <span class="st">&quot;RACE&quot;</span>) <span class="co">#kin</span></span>
<span id="cb421-6"><a href="ch6-Ego-Network-Data-R.html#cb421-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb421-7"><a href="ch6-Ego-Network-Data-R.html#cb421-7" aria-hidden="true" tabindex="-1"></a>pmatch_race_nonkin <span class="ot">&lt;-</span> <span class="fu">comp_ply</span>(egonetlist_nonkin, <span class="at">alt.attr =</span> <span class="st">&quot;RACE&quot;</span>, </span>
<span id="cb421-8"><a href="ch6-Ego-Network-Data-R.html#cb421-8" aria-hidden="true" tabindex="-1"></a>                               <span class="at">.f =</span> prop_same_function, <span class="at">ego.attr =</span> <span class="st">&quot;RACE&quot;</span>) <span class="co">#nonkin</span></span>
<span id="cb421-9"><a href="ch6-Ego-Network-Data-R.html#cb421-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb421-10"><a href="ch6-Ego-Network-Data-R.html#cb421-10" aria-hidden="true" tabindex="-1"></a>racedat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(pmatch_race<span class="sc">$</span>result, pmatch_race_kin<span class="sc">$</span>result, </span>
<span id="cb421-11"><a href="ch6-Ego-Network-Data-R.html#cb421-11" aria-hidden="true" tabindex="-1"></a>                      pmatch_race_nonkin<span class="sc">$</span>result)</span></code></pre></div>
<div class="sourceCode" id="cb422"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb422-1"><a href="ch6-Ego-Network-Data-R.html#cb422-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(racedat)</span></code></pre></div>
<pre><code>##          pmatch_race.result pmatch_race_kin.result pmatch_race_nonkin.result
## 19850001                  1                      1                         1
## 19850002                  1                      1                         1
## 19850003                  1                      1                         1
## 19850004                  1                    NaN                         1
## 19850005                  1                      1                       NaN
## 19850006                  1                      1                         1</code></pre>
<p>Now, let's do a simple summary over the columns in each data frame using the <code>apply()</code> function. <code>apply()</code> allows us to do a specified function for each column or row of a matrix (it will automatically be coerced into a matrix if it is a data frame). This is the equivalent of <code>lapply()</code> for matrices. Here we will set MARGIN to 2 to take a summary over the columns and set FUN (the function of interest) to summary.</p>
<div class="sourceCode" id="cb424"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb424-1"><a href="ch6-Ego-Network-Data-R.html#cb424-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(sexdat, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> summary)</span></code></pre></div>
<pre><code>##         pmatch_sex.result pmatch_sex_kin.result pmatch_sex_nonkin.result
## Min.            0.0000000             0.0000000                 0.000000
## 1st Qu.         0.4000000             0.0000000                 0.500000
## Median          0.6000000             0.5000000                 1.000000
## Mean            0.5917264             0.4647869                 0.738193
## 3rd Qu.         0.8000000             0.6666667                 1.000000
## Max.            1.0000000             1.0000000                 1.000000
## NA&#39;s          137.0000000           405.0000000               557.000000</code></pre>
<div class="sourceCode" id="cb426"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb426-1"><a href="ch6-Ego-Network-Data-R.html#cb426-1" aria-hidden="true" tabindex="-1"></a><span class="fu">apply</span>(racedat, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> summary)</span></code></pre></div>
<pre><code>##         pmatch_race.result pmatch_race_kin.result pmatch_race_nonkin.result
## Min.             0.0000000              0.0000000                 0.0000000
## 1st Qu.          1.0000000              1.0000000                 1.0000000
## Median           1.0000000              1.0000000                 1.0000000
## Mean             0.9477834              0.9690074                 0.9294502
## 3rd Qu.          1.0000000              1.0000000                 1.0000000
## Max.             1.0000000              1.0000000                 1.0000000
## NA&#39;s           140.0000000            406.0000000               561.0000000</code></pre>
<p>We can see that there are clear differences by relation and demographic characteristic. Starting with gender, the mean value for proportion matching is .592. This value decreases to .465 for kin ties and increases to .738 for non-kin ties. Thus, individuals tend to have much more homogenous ego networks for gender in terms of non-kin ties. This follows as kin ties (such as marriage, parent-child, etc.) tend to cut across gender lines.</p>
<p>Race offers a very different story. The overall level of matching is quite high (over .9) and is actually a little higher in the kin case than in the non-kin case. This would suggest that racial/ethnic boundaries, while quite strong in this data, are a bit weaker in cases of friendship, etc. which extend beyond marital and family relations. More generally, we see that race is a much more salient dimension than gender, with many respondents matching perfectly with all members of their network along racial lines, but much less so with gender, where differences between ego and alter are more common.</p>
</div>
<div id="analyzing-homophily-at-the-dyadic-level-ego-alter-pairs" class="section level3 hasAnchor" number="6.3.2">
<h3><span class="header-section-number">6.3.2</span> Analyzing Homophily at the Dyadic Level: Ego-Alter Pairs<a href="ch6-Ego-Network-Data-R.html#analyzing-homophily-at-the-dyadic-level-ego-alter-pairs" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>So far, we have summarized the level of homophily within each ego network. It is often of interest, however, to look at the overall rates of interaction between groups. We may be interested in knowing how likely a tie is to exist between two people who match on gender and/or race (e.g., <span class="citation">Smith, McPherson, and Smith-Lovin (2014)</span>). This necessitates thinking about the data in dyadic terms, where we want to summarize the rates of interaction between two different groups (male/female) looking at all ego-alter pairs in the data. For example, what proportion of ties are homogenous along gender lines?</p>
<p>As a first step, we will the take the egor object and create a data frame that captures all ego-alter pairs. Here we can use the <code>as_alters_df()</code> function. We use our egor object as input and tell the function to also include ego attributes, which we need in this case.</p>
<div class="sourceCode" id="cb428"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb428-1"><a href="ch6-Ego-Network-Data-R.html#cb428-1" aria-hidden="true" tabindex="-1"></a>ego_alter_dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">as_alters_df</span>(egonetlist, <span class="at">include.ego.vars =</span> <span class="cn">TRUE</span>))</span></code></pre></div>
<p>We now have a data frame where each row corresponds to a different ego-alter pair. Let's take a look at the first six rows:</p>
<div class="sourceCode" id="cb429"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb429-1"><a href="ch6-Ego-Network-Data-R.html#cb429-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ego_alter_dat)</span></code></pre></div>
<pre><code>##   .altID   .egoID AGE EDUC  RACE    SEX      RELIG AGE_CATEGORICAL EDUC_CATEGORICAL TALKTO SPOUSE KIN AGE_ego EDUC_ego RACE_ego SEX_ego RELIG_ego AGE_CATEGORICAL_ego EDUC_CATEGORICAL_ego NUMGIVEN_ego HAPPY_ego HEALTH_ego PARTYID_ego WTSSALL_ego
## 1      1 19850001  32   18 white   male     jewish             30s    Post Graduate      2      2   0      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 2      2 19850001  29   16 white female protestant             20s          College      1      1   1      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 3      3 19850001  32   18 white   male     jewish             30s    Post Graduate      3      2   0      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 4      4 19850001  35   16 white   male     jewish             30s          College      3      2   1      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 5      5 19850001  29   13 white female   catholic             20s     Some College      2      2   0      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 6      1 19850002  42   12 white female   catholic             40s               HS      1      1   1      49       19    white    male  catholic                 40s        Post Graduate            6         2          1           4      1.0363</code></pre>
<p>Note that the columns associated with ego have a _ego after it (<code>RACE_ego</code>, <code>SEX_ego</code>, and so on) while the variables corresponding to the alters do not (<code>RACE</code>, <code>SEX</code>). We can see that the ego values are repeated N times, for each N alter that they name. It will be useful to rename the alter variables to have a "_alter" addition, to be consistent with the ego variables. Let's go ahead and change the alter column names. First we grab the column names on the ego-alter data frame.</p>
<div class="sourceCode" id="cb431"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb431-1"><a href="ch6-Ego-Network-Data-R.html#cb431-1" aria-hidden="true" tabindex="-1"></a>cnames <span class="ot">&lt;-</span> <span class="fu">colnames</span>(ego_alter_dat)</span></code></pre></div>
<p>Now we identify which columns are the alter columns, running from <code>AGE</code> to <code>EDUC_CATEGORICAL</code>:</p>
<div class="sourceCode" id="cb432"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb432-1"><a href="ch6-Ego-Network-Data-R.html#cb432-1" aria-hidden="true" tabindex="-1"></a>which_age_column <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">colnames</span>(ego_alter_dat) <span class="sc">==</span> <span class="st">&quot;AGE&quot;</span>)</span>
<span id="cb432-2"><a href="ch6-Ego-Network-Data-R.html#cb432-2" aria-hidden="true" tabindex="-1"></a>which_educ_cat_column <span class="ot">&lt;-</span> <span class="fu">which</span>(<span class="fu">colnames</span>(ego_alter_dat) <span class="sc">==</span> <span class="st">&quot;EDUC_CATEGORICAL&quot;</span>)</span>
<span id="cb432-3"><a href="ch6-Ego-Network-Data-R.html#cb432-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb432-4"><a href="ch6-Ego-Network-Data-R.html#cb432-4" aria-hidden="true" tabindex="-1"></a>alter_columns <span class="ot">&lt;-</span> which_age_column<span class="sc">:</span>which_educ_cat_column</span></code></pre></div>
<p>Here we add _alter to the alter column names using a paste command:</p>
<div class="sourceCode" id="cb433"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb433-1"><a href="ch6-Ego-Network-Data-R.html#cb433-1" aria-hidden="true" tabindex="-1"></a>cnames[alter_columns] <span class="ot">&lt;-</span> <span class="fu">paste</span>(cnames[alter_columns], <span class="st">&quot;_alter&quot;</span>, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>) </span></code></pre></div>
<p>And finally we put the new variable names on the ego-alter data frame.</p>
<div class="sourceCode" id="cb434"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb434-1"><a href="ch6-Ego-Network-Data-R.html#cb434-1" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(ego_alter_dat) <span class="ot">&lt;-</span> cnames </span></code></pre></div>
<div class="sourceCode" id="cb435"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb435-1"><a href="ch6-Ego-Network-Data-R.html#cb435-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(ego_alter_dat)</span></code></pre></div>
<pre><code>##   .altID   .egoID AGE_alter EDUC_alter RACE_alter SEX_alter RELIG_alter AGE_CATEGORICAL_alter EDUC_CATEGORICAL_alter TALKTO SPOUSE KIN AGE_ego EDUC_ego RACE_ego SEX_ego RELIG_ego AGE_CATEGORICAL_ego EDUC_CATEGORICAL_ego NUMGIVEN_ego HAPPY_ego HEALTH_ego PARTYID_ego WTSSALL_ego
## 1      1 19850001        32         18      white      male      jewish                   30s          Post Graduate      2      2   0      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 2      2 19850001        29         16      white    female  protestant                   20s                College      1      1   1      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 3      3 19850001        32         18      white      male      jewish                   30s          Post Graduate      3      2   0      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 4      4 19850001        35         16      white      male      jewish                   30s                College      3      2   1      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 5      5 19850001        29         13      white    female    catholic                   20s           Some College      2      2   0      33       16    white    male    jewish                 30s              College            6         2          2           1      1.0363
## 6      1 19850002        42         12      white    female    catholic                   40s                     HS      1      1   1      49       19    white    male  catholic                 40s        Post Graduate            6         2          1           4      1.0363</code></pre>
<p>With the ego-alter data in hand, we can begin to explore the pattern of homophily in the data. We start by creating a simple table of ego gender by alter gender. Each ego will be included in the table multiple times (once for each named alter).</p>
<div class="sourceCode" id="cb437"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb437-1"><a href="ch6-Ego-Network-Data-R.html#cb437-1" aria-hidden="true" tabindex="-1"></a>sextab <span class="ot">&lt;-</span> <span class="fu">table</span>(ego_alter_dat[, <span class="st">&quot;SEX_ego&quot;</span>], ego_alter_dat[, <span class="st">&quot;SEX_alter&quot;</span>])</span></code></pre></div>
<div class="sourceCode" id="cb438"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb438-1"><a href="ch6-Ego-Network-Data-R.html#cb438-1" aria-hidden="true" tabindex="-1"></a>sextab</span></code></pre></div>
<pre><code>##         
##          female male
##   female   1515  970
##   male      748 1245</code></pre>
<p>We can see from the table that out of all ego-alter pairs, 1515 are female-female, 1245 are male-male and so on. We can use this information to calculate a number of useful items. For example, we can calculate the proportion of ties that match on gender. We take the number of ego-alter pairs that match (1515 + 1245) and divide that by the total number of ego-alter pairs (1515 + 970 + 748 + 1245).</p>
<div class="sourceCode" id="cb440"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb440-1"><a href="ch6-Ego-Network-Data-R.html#cb440-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">diag</span>(sextab)) <span class="sc">/</span> <span class="fu">sum</span>(sextab)</span></code></pre></div>
<pre><code>## [1] 0.6163466</code></pre>
<p>We can see that over all ego-alter pairs, .616 are of the same gender. And now for race:</p>
<div class="sourceCode" id="cb442"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb442-1"><a href="ch6-Ego-Network-Data-R.html#cb442-1" aria-hidden="true" tabindex="-1"></a>racetab <span class="ot">&lt;-</span> <span class="fu">table</span>(ego_alter_dat[, <span class="st">&quot;RACE_ego&quot;</span>], ego_alter_dat[, <span class="st">&quot;RACE_alter&quot;</span>])</span></code></pre></div>
<div class="sourceCode" id="cb443"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb443-1"><a href="ch6-Ego-Network-Data-R.html#cb443-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sum</span>(<span class="fu">diag</span>(racetab)) <span class="sc">/</span> <span class="fu">sum</span>(racetab) </span></code></pre></div>
<pre><code>## [1] 0.948781</code></pre>
<p>We can see that about .949 of ego-alter pairs match on race, much higher than for gender. Tables like these offer a useful starting point for an analysis of homophily. The tables are limited, however, as they only tell us about the existing ties in the data. There is no sense of what the rate of homophily looks like compared to baseline, or chance, expectations. For example, we may want to know if gender homophily is stronger than what we would observe if people randomly formed ties (i.e., with no consideration of gender). By comparing to random, baseline expectations, we can get a better picture of the salience of the demographic characteristic in question. There are a number of ways to compare a raw mixing table, like that in <code>sextab</code>, to a specified baseline expectation. For example, we can use log-linear models, case-control models, or exponential random graph models. Here we will do a very simple analysis, calculating the odds of an observed tie matching on gender (or race, etc.) compared to the odds of matching by chance. To form the chance expectations, we first pair each case in the data with each other. We then take these random pairings and calculate the odds of two people matching on gender (or race). The odds of matching in the actual ego-alter pairs is then compared to the odds of matching based on these random pairings.</p>
<p>Here, we will write a little function to calculate the odds ratio of interest.</p>
<div class="sourceCode" id="cb445"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb445-1"><a href="ch6-Ego-Network-Data-R.html#cb445-1" aria-hidden="true" tabindex="-1"></a>oddsratio_function <span class="ot">&lt;-</span>  <span class="cf">function</span>(egoalter_tab, attribute) {</span>
<span id="cb445-2"><a href="ch6-Ego-Network-Data-R.html#cb445-2" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-3"><a href="ch6-Ego-Network-Data-R.html#cb445-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Arguments: </span></span>
<span id="cb445-4"><a href="ch6-Ego-Network-Data-R.html#cb445-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># egoalter_tab: table of interest</span></span>
<span id="cb445-5"><a href="ch6-Ego-Network-Data-R.html#cb445-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># attribute: vector representing attribute of interest in the sample </span></span>
<span id="cb445-6"><a href="ch6-Ego-Network-Data-R.html#cb445-6" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-7"><a href="ch6-Ego-Network-Data-R.html#cb445-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We first calculate the number of dyads that match and mismatch on the</span></span>
<span id="cb445-8"><a href="ch6-Ego-Network-Data-R.html#cb445-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># attribute based on the observed data. </span></span>
<span id="cb445-9"><a href="ch6-Ego-Network-Data-R.html#cb445-9" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-10"><a href="ch6-Ego-Network-Data-R.html#cb445-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We calculate the number matching by summing up over the diagonal of the </span></span>
<span id="cb445-11"><a href="ch6-Ego-Network-Data-R.html#cb445-11" aria-hidden="true" tabindex="-1"></a>  <span class="co"># the table (as these are cases where ego and alter have the same value).</span></span>
<span id="cb445-12"><a href="ch6-Ego-Network-Data-R.html#cb445-12" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-13"><a href="ch6-Ego-Network-Data-R.html#cb445-13" aria-hidden="true" tabindex="-1"></a>  match <span class="ot">&lt;-</span> <span class="fu">sum</span>(<span class="fu">diag</span>(egoalter_tab)) </span>
<span id="cb445-14"><a href="ch6-Ego-Network-Data-R.html#cb445-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-15"><a href="ch6-Ego-Network-Data-R.html#cb445-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We now calculate the number mismatching by taking the total number of </span></span>
<span id="cb445-16"><a href="ch6-Ego-Network-Data-R.html#cb445-16" aria-hidden="true" tabindex="-1"></a>  <span class="co"># dyads and subtracting the number that match (calculated above).</span></span>
<span id="cb445-17"><a href="ch6-Ego-Network-Data-R.html#cb445-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-18"><a href="ch6-Ego-Network-Data-R.html#cb445-18" aria-hidden="true" tabindex="-1"></a>  notmatch <span class="ot">&lt;-</span> <span class="fu">sum</span>(egoalter_tab) <span class="sc">-</span> match</span>
<span id="cb445-19"><a href="ch6-Ego-Network-Data-R.html#cb445-19" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-20"><a href="ch6-Ego-Network-Data-R.html#cb445-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Now we calculate our chance expectations, defined as what would happen</span></span>
<span id="cb445-21"><a href="ch6-Ego-Network-Data-R.html#cb445-21" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if we randomly paired all respondents from the data (defined in the </span></span>
<span id="cb445-22"><a href="ch6-Ego-Network-Data-R.html#cb445-22" aria-hidden="true" tabindex="-1"></a>  <span class="co"># input attribute vector), and calculated how many of those </span></span>
<span id="cb445-23"><a href="ch6-Ego-Network-Data-R.html#cb445-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># pairs were the same (and different) on the attribute of interest.</span></span>
<span id="cb445-24"><a href="ch6-Ego-Network-Data-R.html#cb445-24" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-25"><a href="ch6-Ego-Network-Data-R.html#cb445-25" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We first do a table on the attribute, to see how many people fall </span></span>
<span id="cb445-26"><a href="ch6-Ego-Network-Data-R.html#cb445-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># into each category.</span></span>
<span id="cb445-27"><a href="ch6-Ego-Network-Data-R.html#cb445-27" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-28"><a href="ch6-Ego-Network-Data-R.html#cb445-28" aria-hidden="true" tabindex="-1"></a>  freq <span class="ot">&lt;-</span> <span class="fu">table</span>(attribute) </span>
<span id="cb445-29"><a href="ch6-Ego-Network-Data-R.html#cb445-29" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-30"><a href="ch6-Ego-Network-Data-R.html#cb445-30" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We next calculate the total number of random pairings, </span></span>
<span id="cb445-31"><a href="ch6-Ego-Network-Data-R.html#cb445-31" aria-hidden="true" tabindex="-1"></a>  <span class="co"># assuming we pair all respondents with all respondents. </span></span>
<span id="cb445-32"><a href="ch6-Ego-Network-Data-R.html#cb445-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># This is simply the number of respondents times the number of </span></span>
<span id="cb445-33"><a href="ch6-Ego-Network-Data-R.html#cb445-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># respondents minus 1, as we assume we are not pairing </span></span>
<span id="cb445-34"><a href="ch6-Ego-Network-Data-R.html#cb445-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># people with themself.</span></span>
<span id="cb445-35"><a href="ch6-Ego-Network-Data-R.html#cb445-35" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-36"><a href="ch6-Ego-Network-Data-R.html#cb445-36" aria-hidden="true" tabindex="-1"></a>  total_dyads <span class="ot">&lt;-</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> (<span class="fu">sum</span>(freq) <span class="sc">-</span> <span class="dv">1</span>)</span>
<span id="cb445-37"><a href="ch6-Ego-Network-Data-R.html#cb445-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-38"><a href="ch6-Ego-Network-Data-R.html#cb445-38" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We now calculate the number of random pairings expected to </span></span>
<span id="cb445-39"><a href="ch6-Ego-Network-Data-R.html#cb445-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># match by chance.</span></span>
<span id="cb445-40"><a href="ch6-Ego-Network-Data-R.html#cb445-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Formally, we take the number in each category (e.g., number of men) and</span></span>
<span id="cb445-41"><a href="ch6-Ego-Network-Data-R.html#cb445-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># multiply that number by itself (minus 1 as we again </span></span>
<span id="cb445-42"><a href="ch6-Ego-Network-Data-R.html#cb445-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># assume people are not paired with themself), showing</span></span>
<span id="cb445-43"><a href="ch6-Ego-Network-Data-R.html#cb445-43" aria-hidden="true" tabindex="-1"></a>  <span class="co"># how many pairs would be the same if we paired all respondents with all </span></span>
<span id="cb445-44"><a href="ch6-Ego-Network-Data-R.html#cb445-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># respondents. Remember that R will multiply things element-wise, </span></span>
<span id="cb445-45"><a href="ch6-Ego-Network-Data-R.html#cb445-45" aria-hidden="true" tabindex="-1"></a>  <span class="co"># so the following bit of code will take the first value in freq</span></span>
<span id="cb445-46"><a href="ch6-Ego-Network-Data-R.html#cb445-46" aria-hidden="true" tabindex="-1"></a>  <span class="co"># and multiply it by the first element in freq-1. We sum up the values </span></span>
<span id="cb445-47"><a href="ch6-Ego-Network-Data-R.html#cb445-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># to get the total number of dyads that are expected to match.</span></span>
<span id="cb445-48"><a href="ch6-Ego-Network-Data-R.html#cb445-48" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-49"><a href="ch6-Ego-Network-Data-R.html#cb445-49" aria-hidden="true" tabindex="-1"></a>  match_chance <span class="ot">&lt;-</span> <span class="fu">sum</span>(freq <span class="sc">*</span> (freq <span class="sc">-</span> <span class="dv">1</span>))</span>
<span id="cb445-50"><a href="ch6-Ego-Network-Data-R.html#cb445-50" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-51"><a href="ch6-Ego-Network-Data-R.html#cb445-51" aria-hidden="true" tabindex="-1"></a>  <span class="co"># We now calculate the number of dyads not matching by chance as the </span></span>
<span id="cb445-52"><a href="ch6-Ego-Network-Data-R.html#cb445-52" aria-hidden="true" tabindex="-1"></a>  <span class="co"># difference between the total number of dyads and </span></span>
<span id="cb445-53"><a href="ch6-Ego-Network-Data-R.html#cb445-53" aria-hidden="true" tabindex="-1"></a>  <span class="co"># those matching by chance.</span></span>
<span id="cb445-54"><a href="ch6-Ego-Network-Data-R.html#cb445-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-55"><a href="ch6-Ego-Network-Data-R.html#cb445-55" aria-hidden="true" tabindex="-1"></a>  notmatch_chance <span class="ot">&lt;-</span>  total_dyads <span class="sc">-</span> match_chance </span>
<span id="cb445-56"><a href="ch6-Ego-Network-Data-R.html#cb445-56" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb445-57"><a href="ch6-Ego-Network-Data-R.html#cb445-57" aria-hidden="true" tabindex="-1"></a>  <span class="co"># And finally we can calculate the odds ratio of </span></span>
<span id="cb445-58"><a href="ch6-Ego-Network-Data-R.html#cb445-58" aria-hidden="true" tabindex="-1"></a>  <span class="co"># observed odds of matching to odds of matching by chance</span></span>
<span id="cb445-59"><a href="ch6-Ego-Network-Data-R.html#cb445-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-60"><a href="ch6-Ego-Network-Data-R.html#cb445-60" aria-hidden="true" tabindex="-1"></a>  or <span class="ot">&lt;-</span> (match <span class="sc">*</span> notmatch_chance) <span class="sc">/</span> (notmatch <span class="sc">*</span> match_chance) </span>
<span id="cb445-61"><a href="ch6-Ego-Network-Data-R.html#cb445-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb445-62"><a href="ch6-Ego-Network-Data-R.html#cb445-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(or)</span>
<span id="cb445-63"><a href="ch6-Ego-Network-Data-R.html#cb445-63" aria-hidden="true" tabindex="-1"></a>} </span></code></pre></div>
<p>Now, let's use our little function to calculate the odds of a tie matching on gender and race, relative to chance. The two inputs are the table of ego-alter characteristics (<code>sextab</code> or <code>racetab</code>) and the input vector of attributes, showing the distribution of gender or race in the sample. Here, our baseline expectations will be based on randomly pairing all cases in the original sample. We thus set the attribute argument to the sex or race values from the ego data frame.</p>
<div class="sourceCode" id="cb446"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb446-1"><a href="ch6-Ego-Network-Data-R.html#cb446-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oddsratio_function</span>(<span class="at">egoalter_tab =</span> sextab, <span class="at">attribute =</span> ego_dat[, <span class="st">&quot;SEX&quot;</span>])</span></code></pre></div>
<pre><code>## [1] 1.575119</code></pre>
<div class="sourceCode" id="cb448"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb448-1"><a href="ch6-Ego-Network-Data-R.html#cb448-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oddsratio_function</span>(<span class="at">egoalter_tab =</span> racetab, <span class="at">attribute =</span> ego_dat[, <span class="st">&quot;RACE&quot;</span>])</span></code></pre></div>
<pre><code>## [1] 7.379298</code></pre>
<p>The results show that the odds of a tie matching on gender is 1.575 times higher than what we expect by chance. The odds ratio is much higher for race (7.379), suggesting that even net of chance expectations, race is the more salient dimension. More generally, we see that individuals are not forming ties at random in regard to race or gender (as the observed rate of matching is well above what we expect by chance).</p>
<p>Let's also calculate the odds ratios for kin and non-kin ties, seeing how the odds of matching differ by relation. The main difference from above is that we need to subset the ego-alter data to just include kin (or non-kin) ego-alter pairs. The rest is analogous to the code from above. For these analyses we will use all cases to form the chance expectations, but we could do analogous calculations just looking at those with kin (or non-kin) ties.</p>
<div class="sourceCode" id="cb450"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb450-1"><a href="ch6-Ego-Network-Data-R.html#cb450-1" aria-hidden="true" tabindex="-1"></a><span class="co">#odds of matching for kin ties, gender</span></span>
<span id="cb450-2"><a href="ch6-Ego-Network-Data-R.html#cb450-2" aria-hidden="true" tabindex="-1"></a>kin_sextab <span class="ot">&lt;-</span> <span class="fu">table</span>(ego_alter_dat[ego_alter_dat<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;SEX_ego&quot;</span>], </span>
<span id="cb450-3"><a href="ch6-Ego-Network-Data-R.html#cb450-3" aria-hidden="true" tabindex="-1"></a>                    ego_alter_dat[ego_alter_dat<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;SEX_alter&quot;</span>])</span>
<span id="cb450-4"><a href="ch6-Ego-Network-Data-R.html#cb450-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb450-5"><a href="ch6-Ego-Network-Data-R.html#cb450-5" aria-hidden="true" tabindex="-1"></a><span class="fu">oddsratio_function</span>(<span class="at">egoalter_tab =</span> kin_sextab, <span class="at">attribute =</span> ego_dat[, <span class="st">&quot;SEX&quot;</span>]) </span></code></pre></div>
<pre><code>## [1] 0.9580393</code></pre>
<div class="sourceCode" id="cb452"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb452-1"><a href="ch6-Ego-Network-Data-R.html#cb452-1" aria-hidden="true" tabindex="-1"></a><span class="co">#odds of matching for kin ties, race</span></span>
<span id="cb452-2"><a href="ch6-Ego-Network-Data-R.html#cb452-2" aria-hidden="true" tabindex="-1"></a>kin_racetab <span class="ot">&lt;-</span> <span class="fu">table</span>(ego_alter_dat[ego_alter_dat<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;RACE_ego&quot;</span>], </span>
<span id="cb452-3"><a href="ch6-Ego-Network-Data-R.html#cb452-3" aria-hidden="true" tabindex="-1"></a>                     ego_alter_dat[ego_alter_dat<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">1</span>, <span class="st">&quot;RACE_alter&quot;</span>])</span>
<span id="cb452-4"><a href="ch6-Ego-Network-Data-R.html#cb452-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb452-5"><a href="ch6-Ego-Network-Data-R.html#cb452-5" aria-hidden="true" tabindex="-1"></a><span class="fu">oddsratio_function</span>(<span class="at">egoalter_tab =</span> kin_racetab, <span class="at">attribute =</span> ego_dat[, <span class="st">&quot;RACE&quot;</span>]) </span></code></pre></div>
<pre><code>## [1] 14.12947</code></pre>
<div class="sourceCode" id="cb454"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb454-1"><a href="ch6-Ego-Network-Data-R.html#cb454-1" aria-hidden="true" tabindex="-1"></a><span class="co">#odds of matching for non-kin ties, gender</span></span>
<span id="cb454-2"><a href="ch6-Ego-Network-Data-R.html#cb454-2" aria-hidden="true" tabindex="-1"></a>nonkin_sextab <span class="ot">&lt;-</span> <span class="fu">table</span>(ego_alter_dat[ego_alter_dat<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">0</span>, <span class="st">&quot;SEX_ego&quot;</span>], </span>
<span id="cb454-3"><a href="ch6-Ego-Network-Data-R.html#cb454-3" aria-hidden="true" tabindex="-1"></a>                       ego_alter_dat[ego_alter_dat<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">0</span>, <span class="st">&quot;SEX_alter&quot;</span>])</span>
<span id="cb454-4"><a href="ch6-Ego-Network-Data-R.html#cb454-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb454-5"><a href="ch6-Ego-Network-Data-R.html#cb454-5" aria-hidden="true" tabindex="-1"></a><span class="fu">oddsratio_function</span>(<span class="at">egoalter_tab =</span> nonkin_sextab, <span class="at">attribute =</span> ego_dat[, <span class="st">&quot;SEX&quot;</span>]) </span></code></pre></div>
<pre><code>## [1] 2.937705</code></pre>
<div class="sourceCode" id="cb456"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb456-1"><a href="ch6-Ego-Network-Data-R.html#cb456-1" aria-hidden="true" tabindex="-1"></a><span class="co">#odds of matching for non-kin ties, race</span></span>
<span id="cb456-2"><a href="ch6-Ego-Network-Data-R.html#cb456-2" aria-hidden="true" tabindex="-1"></a>nonkin_racetab <span class="ot">&lt;-</span> <span class="fu">table</span>(ego_alter_dat[ego_alter_dat<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">0</span>, <span class="st">&quot;RACE_ego&quot;</span>], </span>
<span id="cb456-3"><a href="ch6-Ego-Network-Data-R.html#cb456-3" aria-hidden="true" tabindex="-1"></a>                        ego_alter_dat[ ego_alter_dat<span class="sc">$</span>KIN <span class="sc">==</span> <span class="dv">0</span>, <span class="st">&quot;RACE_alter&quot;</span>])</span>
<span id="cb456-4"><a href="ch6-Ego-Network-Data-R.html#cb456-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb456-5"><a href="ch6-Ego-Network-Data-R.html#cb456-5" aria-hidden="true" tabindex="-1"></a><span class="fu">oddsratio_function</span>(<span class="at">egoalter_tab =</span> nonkin_racetab, <span class="at">attribute =</span> ego_dat[, <span class="st">&quot;RACE&quot;</span>])</span></code></pre></div>
<pre><code>## [1] 4.758637</code></pre>
<p>As before, we see that the odds of matching on race are much higher than matching on gender for kin ties, while the differences are much less pronounced for non-kin ties.</p>
<p>We have thus far employed very simple models to construct the baseline expectations. More complex models are possible, however. For example, we could construct our baseline expectations to take into account degree differences between groups; i.e., if men have larger ego networks, they would be represented more heavily when forming the random pairs of respondents (and perhaps that would increase the rate of matching expected by chance). Or, we may want to control for isolation status when constructing our baseline expectations. We would still ask what happens if people randomly formed ties, but now we adjust for the fact that some people do not form any ties at all. Here, we recalculate the odds ratio for gender matching, but only consider non-isolates when forming the baseline expectations.</p>
<div class="sourceCode" id="cb458"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb458-1"><a href="ch6-Ego-Network-Data-R.html#cb458-1" aria-hidden="true" tabindex="-1"></a><span class="fu">oddsratio_function</span>(<span class="at">egoalter_tab =</span> sextab, </span>
<span id="cb458-2"><a href="ch6-Ego-Network-Data-R.html#cb458-2" aria-hidden="true" tabindex="-1"></a>                   <span class="at">attribute =</span> ego_dat<span class="sc">$</span>SEX[ego_dat<span class="sc">$</span>NUMGIVEN <span class="sc">&gt;</span> <span class="dv">0</span>]) </span></code></pre></div>
<pre><code>## [1] 1.571536</code></pre>
</div>
</div>
<div id="homophily-alter-attributes" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Homophily: Alter Attributes<a href="ch6-Ego-Network-Data-R.html#homophily-alter-attributes" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>So far we have looked exclusively at the ego-alter data, seeing if ego is similar to the named alters on gender and race. It is also possible to focus exclusively on the alters. Here, we ignore the ego attribute and simply summarize the alter attributes within each ego network. Such measures are often used as predictors of other outcomes, like political attitudes and mental health (see below for an example). For example, we may want to know how diverse the ego network is, or how similar/different the alters are to each other. Is ego surrounded by people who are all the same? One summary measure is Shannon entropy, equal to: <code>-1 * (sum(pi * log(pi))</code> where pi is the proportion of alters in category i. This is a measure of diversity, with larger values meaning the ego network is more diverse.</p>
<p>The function to calculate diversity is <code>alts_diversity_entropy()</code>. The main inputs are the egor object, the alter attribute of interest (set using the alt.attr argument) and then a base value when calculating the log (here set to exp(1) using the base argument). We start with diversity for gender.</p>
<div class="sourceCode" id="cb460"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb460-1"><a href="ch6-Ego-Network-Data-R.html#cb460-1" aria-hidden="true" tabindex="-1"></a>sex_diversity <span class="ot">&lt;-</span> <span class="fu">alts_diversity_entropy</span>(egonetlist, <span class="at">alt.attr =</span> <span class="st">&quot;SEX&quot;</span>, </span>
<span id="cb460-2"><a href="ch6-Ego-Network-Data-R.html#cb460-2" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">base =</span> <span class="fu">exp</span>(<span class="dv">1</span>))</span></code></pre></div>
<div class="sourceCode" id="cb461"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb461-1"><a href="ch6-Ego-Network-Data-R.html#cb461-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(sex_diversity) </span></code></pre></div>
<pre><code>## # A tibble: 6 × 2
##     .egoID entropy
##      &lt;int&gt;   &lt;dbl&gt;
## 1 19850001   0.673
## 2 19850002   0.673
## 3 19850003   0    
## 4 19850004   0.673
## 5 19850005   0.673
## 6 19850006   0.562</code></pre>
<p>The calculated statistic is stored as <code>entropy</code>. We can see that the first two respondents have high diversity (as the ego networks are nearly half male and half female) while the third respondent has a value of 0 (as all alters are female). And now we do the same thing for race.</p>
<div class="sourceCode" id="cb463"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb463-1"><a href="ch6-Ego-Network-Data-R.html#cb463-1" aria-hidden="true" tabindex="-1"></a>race_diversity <span class="ot">&lt;-</span> <span class="fu">alts_diversity_entropy</span>(egonetlist, <span class="at">alt.attr =</span> <span class="st">&quot;RACE&quot;</span>, </span>
<span id="cb463-2"><a href="ch6-Ego-Network-Data-R.html#cb463-2" aria-hidden="true" tabindex="-1"></a>                                         <span class="at">base =</span> <span class="fu">exp</span>(<span class="dv">1</span>))</span></code></pre></div>
<p>It is important to note that the theoretical maximum is higher in the race case as the number of categories is higher. Also note that the function will yield a 0 for cases where there are no alters or 1 alter, which may not be desirable. To put in NAs for our isolates and those with 1 alter:</p>
<div class="sourceCode" id="cb464"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb464-1"><a href="ch6-Ego-Network-Data-R.html#cb464-1" aria-hidden="true" tabindex="-1"></a>sex_diversity[ego_dat<span class="sc">$</span>NUMGIVEN <span class="sc">&lt;=</span> <span class="dv">1</span>, <span class="st">&quot;entropy&quot;</span>] <span class="ot">&lt;-</span>  <span class="cn">NA</span></span>
<span id="cb464-2"><a href="ch6-Ego-Network-Data-R.html#cb464-2" aria-hidden="true" tabindex="-1"></a>race_diversity[ego_dat<span class="sc">$</span>NUMGIVEN <span class="sc">&lt;=</span> <span class="dv">1</span>, <span class="st">&quot;entropy&quot;</span>] <span class="ot">&lt;-</span>  <span class="cn">NA</span></span></code></pre></div>
<p>And now we can go ahead and look at the summary statistics for diversity.</p>
<div class="sourceCode" id="cb465"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb465-1"><a href="ch6-Ego-Network-Data-R.html#cb465-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(sex_diversity[, <span class="st">&quot;entropy&quot;</span>])</span></code></pre></div>
<pre><code>##     entropy      
##  Min.   :0.0000  
##  1st Qu.:0.5004  
##  Median :0.6365  
##  Mean   :0.4898  
##  3rd Qu.:0.6730  
##  Max.   :0.6931  
##  NA&#39;s   :364</code></pre>
<div class="sourceCode" id="cb467"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb467-1"><a href="ch6-Ego-Network-Data-R.html#cb467-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(race_diversity[, <span class="st">&quot;entropy&quot;</span>])</span></code></pre></div>
<pre><code>##     entropy      
##  Min.   :0.0000  
##  1st Qu.:0.0000  
##  Median :0.0000  
##  Mean   :0.0507  
##  3rd Qu.:0.0000  
##  Max.   :1.3322  
##  NA&#39;s   :364</code></pre>
<p>We can see that the diversity measures are much lower for race than sex, suggesting that the alters tend to be more homogenous in terms of race than sex (in keeping with our findings above).</p>
<p>We can do similar summary measures for continuous variables, like education. For example, we may want to know what the mean (or standard deviation) of education is for the alters in each ego network. We will use a <code>comp_ply()</code> function again. The key inputs are the egor object, the alter attribute (set using the alt.attr argument) and then the function of interest, in this case the mean function (set using the .f argument).</p>
<div class="sourceCode" id="cb469"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb469-1"><a href="ch6-Ego-Network-Data-R.html#cb469-1" aria-hidden="true" tabindex="-1"></a>mean_altereduc <span class="ot">&lt;-</span> <span class="fu">comp_ply</span>(egonetlist, <span class="at">alt.attr =</span> <span class="st">&quot;EDUC&quot;</span>, <span class="at">.f =</span> mean, </span>
<span id="cb469-2"><a href="ch6-Ego-Network-Data-R.html#cb469-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">na.rm =</span> <span class="cn">TRUE</span>) </span></code></pre></div>
<div class="sourceCode" id="cb470"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb470-1"><a href="ch6-Ego-Network-Data-R.html#cb470-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(mean_altereduc[, <span class="st">&quot;result&quot;</span>])</span></code></pre></div>
<pre><code>##      result     
##  Min.   : 3.50  
##  1st Qu.:12.00  
##  Median :12.50  
##  Mean   :12.89  
##  3rd Qu.:14.33  
##  Max.   :18.00  
##  NA&#39;s   :153</code></pre>
</div>
<div id="ego-networks-as-predictors" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Ego Networks as Predictors<a href="ch6-Ego-Network-Data-R.html#ego-networks-as-predictors" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In the section above we examined the properties of the ego networks, focusing mostly on racial and gender homophily. There are a number of other properties we could explore in more detail, like density or network size. For example, we might want to predict network size as a function of race, gender or other demographic characteristics.</p>
<p>We can also use properties of the ego networks as predictors of other outcomes of interest. For example, let's try and predict the variable <code>HAPPY</code> using the features of the ego networks. Are individuals with larger ego networks happier? Does the composition of the ego network matter?</p>
<p><code>Happy</code> is coded as a 1 (very happy), 2 (pretty happy), 3 (not too happy). Let's add a label to the variable and reorder it to run from not happy to happy.</p>
<div class="sourceCode" id="cb472"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb472-1"><a href="ch6-Ego-Network-Data-R.html#cb472-1" aria-hidden="true" tabindex="-1"></a>ego_dat<span class="sc">$</span>HAPPY_FACTOR <span class="ot">&lt;-</span> <span class="fu">factor</span>(ego_dat<span class="sc">$</span>HAPPY, <span class="at">levels =</span> <span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">2</span>, <span class="dv">1</span>), </span>
<span id="cb472-2"><a href="ch6-Ego-Network-Data-R.html#cb472-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">labels =</span> <span class="fu">c</span>(<span class="st">&quot;not too happy&quot;</span>, <span class="st">&quot;pretty happy&quot;</span>, </span>
<span id="cb472-3"><a href="ch6-Ego-Network-Data-R.html#cb472-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">&quot;very happy&quot;</span>))</span></code></pre></div>
<p>Let's also turn our race and sex variables into factors. We set white as the first category in our race variable.</p>
<div class="sourceCode" id="cb473"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb473-1"><a href="ch6-Ego-Network-Data-R.html#cb473-1" aria-hidden="true" tabindex="-1"></a>ego_dat<span class="sc">$</span>RACE_FACTOR <span class="ot">&lt;-</span> <span class="fu">factor</span>(ego_dat<span class="sc">$</span>RACE, <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">&quot;white&quot;</span>, <span class="st">&quot;asian&quot;</span>, </span>
<span id="cb473-2"><a href="ch6-Ego-Network-Data-R.html#cb473-2" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;black&quot;</span>, <span class="st">&quot;hispanic&quot;</span>, </span>
<span id="cb473-3"><a href="ch6-Ego-Network-Data-R.html#cb473-3" aria-hidden="true" tabindex="-1"></a>                                                       <span class="st">&quot;other&quot;</span>)) </span>
<span id="cb473-4"><a href="ch6-Ego-Network-Data-R.html#cb473-4" aria-hidden="true" tabindex="-1"></a>ego_dat<span class="sc">$</span>SEX_FACTOR <span class="ot">&lt;-</span> <span class="fu">factor</span>(ego_dat<span class="sc">$</span>SEX)</span></code></pre></div>
<p>Let’s also put three of our calculated network measures, density, racial diversity and mean alter education, onto the ego data frame.</p>
<div class="sourceCode" id="cb474"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb474-1"><a href="ch6-Ego-Network-Data-R.html#cb474-1" aria-hidden="true" tabindex="-1"></a>ego_dat<span class="sc">$</span>DENSITY <span class="ot">&lt;-</span> dens[[<span class="st">&quot;density&quot;</span>]] <span class="co">#  getting values out of tibble format</span></span>
<span id="cb474-2"><a href="ch6-Ego-Network-Data-R.html#cb474-2" aria-hidden="true" tabindex="-1"></a>ego_dat<span class="sc">$</span>RACE_DIVERSITY <span class="ot">&lt;-</span> race_diversity[[<span class="st">&quot;entropy&quot;</span>]] </span>
<span id="cb474-3"><a href="ch6-Ego-Network-Data-R.html#cb474-3" aria-hidden="true" tabindex="-1"></a>ego_dat<span class="sc">$</span>MEAN_ALTEREDUC <span class="ot">&lt;-</span> mean_altereduc[[<span class="st">&quot;result&quot;</span>]] </span></code></pre></div>
<p><code>HAPPY</code> is an ordinal variable. With ordinal outcome variables, it is best to utilize ordered logistic regression (or a similar model). We will need the <code>polr()</code> function in the <strong>MASS</strong> package to run these models.</p>
<div class="sourceCode" id="cb475"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb475-1"><a href="ch6-Ego-Network-Data-R.html#cb475-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS) </span></code></pre></div>
<p>To simplify things, let's create a data frame that has no missing data on any of the variables we want to include in the full model. The outcome of interest is <code>HAPPY_FACTOR</code> and the main predictors are ego network size (<code>NUMGIVEN</code>), density (<code>DENSITY</code>) the mean education of the alter (<code>MEAN_ALTEREDUC</code>) and racial diversity of the alters (<code>RACE_DIVERSITY</code>). We also include a number of demographic controls.</p>
<div class="sourceCode" id="cb476"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb476-1"><a href="ch6-Ego-Network-Data-R.html#cb476-1" aria-hidden="true" tabindex="-1"></a>ego_dat_nomiss <span class="ot">&lt;-</span> <span class="fu">na.omit</span>(ego_dat[, <span class="fu">c</span>(<span class="st">&quot;HAPPY_FACTOR&quot;</span>, <span class="st">&quot;NUMGIVEN&quot;</span>, <span class="st">&quot;DENSITY&quot;</span>, </span>
<span id="cb476-2"><a href="ch6-Ego-Network-Data-R.html#cb476-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">&quot;MEAN_ALTEREDUC&quot;</span>, <span class="st">&quot;RACE_DIVERSITY&quot;</span>, </span>
<span id="cb476-3"><a href="ch6-Ego-Network-Data-R.html#cb476-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">&quot;EDUC&quot;</span>, <span class="st">&quot;AGE&quot;</span>, <span class="st">&quot;RACE_FACTOR&quot;</span>, </span>
<span id="cb476-4"><a href="ch6-Ego-Network-Data-R.html#cb476-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="st">&quot;SEX_FACTOR&quot;</span>)])</span></code></pre></div>
<p>Now, we are in a position to run our ordered logistic regression predicting happiness. For our first model we will predict happiness as a function of our two structural network features, ego network size and density.</p>
<div class="sourceCode" id="cb477"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb477-1"><a href="ch6-Ego-Network-Data-R.html#cb477-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(happy_mod1 <span class="ot">&lt;-</span> <span class="fu">polr</span>(HAPPY_FACTOR <span class="sc">~</span> NUMGIVEN <span class="sc">+</span> DENSITY, </span>
<span id="cb477-2"><a href="ch6-Ego-Network-Data-R.html#cb477-2" aria-hidden="true" tabindex="-1"></a>                           <span class="at">data =</span> ego_dat_nomiss)) </span></code></pre></div>
<pre><code>## 
## Re-fitting to get Hessian</code></pre>
<pre><code>## Call:
## polr(formula = HAPPY_FACTOR ~ NUMGIVEN + DENSITY, data = ego_dat_nomiss)
## 
## Coefficients:
##            Value Std. Error t value
## NUMGIVEN 0.08905    0.04789   1.859
## DENSITY  0.49492    0.20547   2.409
## 
## Intercepts:
##                            Value   Std. Error t value
## not too happy|pretty happy -1.4143  0.2722    -5.1965
## pretty happy|very happy     1.6190  0.2724     5.9435
## 
## Residual Deviance: 2080.162 
## AIC: 2088.162</code></pre>
<p>The results suggest that respondents with dense networks report higher levels of happiness, while ego network size (<code>NUMGIVEN</code>) is not a significant predictor of happiness, controlling for density. The initial results would suggest that it is less about the number of people in your ego network that matters for happiness, and more about whether they know each other. And now let's add some controls for demographics.</p>
<div class="sourceCode" id="cb480"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb480-1"><a href="ch6-Ego-Network-Data-R.html#cb480-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(happy_mod2 <span class="ot">&lt;-</span> <span class="fu">polr</span>(HAPPY_FACTOR <span class="sc">~</span> NUMGIVEN <span class="sc">+</span> DENSITY <span class="sc">+</span> EDUC <span class="sc">+</span> AGE <span class="sc">+</span> </span>
<span id="cb480-2"><a href="ch6-Ego-Network-Data-R.html#cb480-2" aria-hidden="true" tabindex="-1"></a>                             RACE_FACTOR <span class="sc">+</span> SEX_FACTOR, </span>
<span id="cb480-3"><a href="ch6-Ego-Network-Data-R.html#cb480-3" aria-hidden="true" tabindex="-1"></a>                           <span class="at">data =</span> ego_dat_nomiss))</span></code></pre></div>
<pre><code>## 
## Re-fitting to get Hessian</code></pre>
<pre><code>## Call:
## polr(formula = HAPPY_FACTOR ~ NUMGIVEN + DENSITY + EDUC + AGE + 
##     RACE_FACTOR + SEX_FACTOR, data = ego_dat_nomiss)
## 
## Coefficients:
##                        Value Std. Error t value
## NUMGIVEN             0.03867    0.04982  0.7761
## DENSITY              0.53994    0.20849  2.5897
## EDUC                 0.06446    0.02180  2.9563
## AGE                  0.00244    0.00363  0.6722
## RACE_FACTORasian     1.07909    0.75375  1.4316
## RACE_FACTORblack    -0.92220    0.24011 -3.8407
## RACE_FACTORhispanic -0.40628    0.28247 -1.4383
## RACE_FACTORother    -0.33871    0.67691 -0.5004
## SEX_FACTORmale       0.09657    0.12030  0.8027
## 
## Intercepts:
##                            Value   Std. Error t value
## not too happy|pretty happy -0.7120  0.4383    -1.6242
## pretty happy|very happy     2.3946  0.4438     5.3962
## 
## Residual Deviance: 2047.593 
## AIC: 2069.593</code></pre>
<p>Controlling for education, race, age and sex, we see that density is still a significant predictor of happiness. Individuals with alters who are interconnected consistently report higher levels of happiness, showing the potential benefits of being part of an integrated social group. We also see that individuals with higher education tend to report higher levels of happiness, while those individuals identifying as black report lower levels of happiness. Finally, we will add our two compositional measures: mean alter education and racial diversity.</p>
<div class="sourceCode" id="cb483"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb483-1"><a href="ch6-Ego-Network-Data-R.html#cb483-1" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(happy_mod3 <span class="ot">&lt;-</span> <span class="fu">polr</span>(HAPPY_FACTOR <span class="sc">~</span> NUMGIVEN <span class="sc">+</span> DENSITY <span class="sc">+</span> EDUC <span class="sc">+</span> AGE <span class="sc">+</span> </span>
<span id="cb483-2"><a href="ch6-Ego-Network-Data-R.html#cb483-2" aria-hidden="true" tabindex="-1"></a>                           RACE_FACTOR <span class="sc">+</span> SEX_FACTOR <span class="sc">+</span> MEAN_ALTEREDUC <span class="sc">+</span> </span>
<span id="cb483-3"><a href="ch6-Ego-Network-Data-R.html#cb483-3" aria-hidden="true" tabindex="-1"></a>                           RACE_DIVERSITY, <span class="at">data =</span> ego_dat_nomiss))</span></code></pre></div>
<pre><code>## 
## Re-fitting to get Hessian</code></pre>
<pre><code>## Call:
## polr(formula = HAPPY_FACTOR ~ NUMGIVEN + DENSITY + EDUC + AGE + 
##     RACE_FACTOR + SEX_FACTOR + MEAN_ALTEREDUC + RACE_DIVERSITY, 
##     data = ego_dat_nomiss)
## 
## Coefficients:
##                          Value Std. Error  t value
## NUMGIVEN             3.654e-02   0.050117  0.72909
## DENSITY              6.040e-01   0.211527  2.85561
## EDUC                 1.198e-02   0.026014  0.46034
## AGE                 -9.306e-05   0.003691 -0.02521
## RACE_FACTORasian     1.014e+00   0.765069  1.32518
## RACE_FACTORblack    -8.308e-01   0.242392 -3.42758
## RACE_FACTORhispanic -1.823e-01   0.287255 -0.63450
## RACE_FACTORother    -1.382e-02   0.680679 -0.02030
## SEX_FACTORmale       7.795e-02   0.120653  0.64609
## MEAN_ALTEREDUC       1.294e-01   0.035478  3.64683
## RACE_DIVERSITY      -6.904e-01   0.361167 -1.91148
## 
## Intercepts:
##                            Value   Std. Error t value
## not too happy|pretty happy  0.1813  0.5104     0.3552
## pretty happy|very happy     3.3248  0.5211     6.3808
## 
## Residual Deviance: 2030.842 
## AIC: 2056.842</code></pre>
<p>Our full model offers interesting insights when compared to model 2. We see that individuals surrounded by highly educated alters tend to report higher levels of happiness. This may be the case as individuals with higher education (especially in 1985) are less stressed, have better financial resources, etc. Being surrounded by such people may make it easier to feel happy oneself. We also see that the <code>EDUC</code> variable, capturing the respondent's education, is no longer a significant predictor. This suggests that happiness is less about having higher levels of education, and more about the social context in which one lives (see, for example: <span class="citation">McPherson and Smith (2019)</span>). Being surrounded by folks who are less stressed (for example) may lead to happiness, even if the respondent does not themself have high levels of education. We also see that the coefficient on racial diversity is negative, but it is not significant (at traditional levels). Thus, while there may be some tendency for respondents with more racially diverse networks to be less happy, our uncertainty in the estimate is too great to be sure the effect is real.</p>
</div>
<div id="working-with-one-input-file" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Working with One Input File<a href="ch6-Ego-Network-Data-R.html#working-with-one-input-file" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>We end the tutorial by demonstrating how to construct egor objects using a single file as the main input. This is directly analogous to part 1 above, but here we use data stored as a single file, rather than 3 separate files. A single file is a convenient and common way of storing ego network data. A single file does, however, make the task of constructing the egor object somewhat more difficult than with 3 separate files. Here, we will demonstrate how to take the ego network data, stored as one file, and turn into the three data frames we read in above, one for the ego information, one for the alter information, and one for the alter-alter tie information (see the <code>onefile_to_egor()</code> function for an alternative approach). Once we have the three data frames, we can use them to construct the egor object, as above.</p>
<p>Let's go ahead and read in the data. The data are the same as above, just stored as one file.</p>
<div class="sourceCode" id="cb486"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb486-1"><a href="ch6-Ego-Network-Data-R.html#cb486-1" aria-hidden="true" tabindex="-1"></a>url4 <span class="ot">&lt;-</span> <span class="st">&quot;https://github.com/JeffreyAlanSmith/Integrated_Network_Science/raw/master/data/gss1985_egonetworks.csv&quot;</span></span>
<span id="cb486-2"><a href="ch6-Ego-Network-Data-R.html#cb486-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb486-3"><a href="ch6-Ego-Network-Data-R.html#cb486-3" aria-hidden="true" tabindex="-1"></a>egonets <span class="ot">&lt;-</span> <span class="fu">read.csv</span>(<span class="at">file =</span> url4)</span></code></pre></div>
<div class="sourceCode" id="cb487"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb487-1"><a href="ch6-Ego-Network-Data-R.html#cb487-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(egonets)</span></code></pre></div>
<pre><code>##     CASEID AGE EDUC  RACE    SEX    RELIG AGE_CATEGORICAL EDUC_CATEGORICAL NUMGIVEN HAPPY HEALTH PARTYID WTSSALL AGE1 AGE2 AGE3 AGE4 AGE5 EDUC1 EDUC2 EDUC3 EDUC4 EDUC5 RACE1 RACE2 RACE3 RACE4 RACE5   SEX1   SEX2   SEX3   SEX4   SEX5     RELIG1     RELIG2   RELIG3     RELIG4   RELIG5 AGE_CATEGORICAL1 AGE_CATEGORICAL2 AGE_CATEGORICAL3 AGE_CATEGORICAL4 AGE_CATEGORICAL5 EDUC_CATEGORICAL1 EDUC_CATEGORICAL2 EDUC_CATEGORICAL3 EDUC_CATEGORICAL4 EDUC_CATEGORICAL5 TALKTO1 TALKTO2 TALKTO3 TALKTO4 TALKTO5 SPOUSE1 SPOUSE2 SPOUSE3 SPOUSE4 SPOUSE5 KIN1 KIN2 KIN3 KIN4 KIN5 CLOSE12 CLOSE13 CLOSE14 CLOSE15 CLOSE23 CLOSE24 CLOSE25 CLOSE34 CLOSE35 CLOSE45
## 1 19850001  33   16 white   male   jewish             30s          College        6     2      2       1  1.0363   32   29   32   35   29    18    16    18    16    13 white white white white white   male female   male   male female     jewish protestant   jewish     jewish catholic              30s              20s              30s              30s              20s     Post Graduate           College     Post Graduate           College      Some College       2       1       3       3       2       2       1       2       2       2    0    1    0    1    0       2       1       1       1       2       2       2       1       1       1
## 2 19850002  49   19 white   male catholic             40s    Post Graduate        6     2      1       4  1.0363   42   44   45   40   50    12    18    16    12    18 white white white white white female   male   male female   male   catholic     jewish   jewish   catholic   jewish              40s              40s              40s              40s              50s                HS     Post Graduate           College                HS     Post Graduate       1       2       1       1       1       1       2       2       2       2    1    0    0    0    0       1       1       2       2       0       2       0       2       1       2
## 3 19850003  23   16 white female   jewish             20s          College        5     2      1       1  1.0363   25   24   46   21   35    16    12    18    16    18 white white white white white female female female female female     jewish     jewish   jewish     jewish   jewish              20s              20s              40s              20s              30s           College                HS     Post Graduate           College     Post Graduate       2       2       2       1       2       2       2       2       2       2    0    0    1    1    0       1       1       1      NA       1       1      NA       2      NA       0
## 4 19850004  26   20 white female   jewish             20s    Post Graduate        5     2      2       0  0.5181   26   27   28   27   25    18    18    18    18    16 white white white white white female   male   male   male female       none protestant     none       none   jewish              20s              20s              20s              20s              20s     Post Graduate     Post Graduate     Post Graduate     Post Graduate           College       1       1       3       2       1       2       2       2       2       2    0    0    0    0    0       1       0       0       1       0       1       1       1       0       1
## 5 19850005  24   17 white female catholic             20s    Post Graduate        5     2      2       2  0.5181   44   25   20   19   12    12    13    13    13     8 white white white white white female female   male   male   male   catholic   catholic catholic   catholic catholic              40s              20s              20s              20s              20s                HS      Some College      Some College      Some College             No HS       2       2       3       3       2       2       2       2       2       2    1    1    1    1    1       2       2       2       2       2       2       2       2       2       2
## 6 19850006  45   17 white   male     none             40s    Post Graduate        4     2      2       1  0.5181   40   35   44   35   NA    16    16    18    16    NA white white white white  &lt;NA&gt;   male   male   male female   &lt;NA&gt; protestant       none     none protestant     &lt;NA&gt;              40s              30s              40s              30s             &lt;NA&gt;           College           College     Post Graduate           College              &lt;NA&gt;       4       2       2       1      NA       2       2       2       2      NA    1    0    0    0   NA       0       1       0      NA       1       1      NA       1      NA      NA</code></pre>
<p>Each row is a respondent, reporting on their network alters. We see a number of columns that correspond to the attributes of the respondent, from <code>CASEID</code> all the way through <code>PARTYID</code>. These columns are the same as in <code>ego_dat</code>. For example, <code>NUMGIVEN</code> reflects the number of alters named (capped at 6+). There are also alter characteristics for age, education, race, religion and sex. For example, for age, we see <code>AGE1</code>, <code>AGE2</code>, <code>AGE3</code>, <code>AGE4</code>, <code>AGE5</code>, corresponding to the age of alter 1, 2, 3, etc. There is also information on the relationship between ego and each alter. For example, the KIN variables (<code>KIN1</code>, <code>KIN2</code>...) show if ego is family with alter 1, 2, and so on. This is analogous to the information in <code>alter_dat</code>, although organized column-wise rather than row-wise. Finally, <code>CLOSE12</code>, <code>CLOSE13</code>... captures the kind of relationship between alter 1-2, 1-3, etc. This corresponds to the information in <code>alteralter_dat</code>. Note that a value of 0 in the <code>CLOSE</code> variables means no relationship exists (1 = know each other and 2 = especially close).</p>
<p>Before we construct our three data frames from the ego network data, it will be useful to define a column that corresponds to the size of the ego networks. Right now, the <code>NUMGIVEN</code> column shows a 6 if they have 6+ ties. But as they only report on 5 alters, we will define their actual network size as 5 if they report having 6+ alters. We will use the <code>ifelse()</code> function :</p>
<div class="sourceCode" id="cb489"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb489-1"><a href="ch6-Ego-Network-Data-R.html#cb489-1" aria-hidden="true" tabindex="-1"></a>egonets<span class="sc">$</span>netsize <span class="ot">&lt;-</span> <span class="fu">ifelse</span>(egonets<span class="sc">$</span>NUMGIVEN <span class="sc">==</span> <span class="dv">6</span>, <span class="dv">5</span>, egonets<span class="sc">$</span>NUMGIVEN) </span></code></pre></div>
<p>As before, we will take out any cases where they have NA for <code>NUMGIVEN</code>.</p>
<div class="sourceCode" id="cb490"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb490-1"><a href="ch6-Ego-Network-Data-R.html#cb490-1" aria-hidden="true" tabindex="-1"></a>egonets <span class="ot">&lt;-</span> egonets[<span class="sc">!</span><span class="fu">is.na</span>(egonets<span class="sc">$</span>NUMGIVEN), ]</span></code></pre></div>
<p>We are now in a position to create our three data frames. We will begin with the ego data. Let's go ahead and grab the ego attribute information from <code>egonets</code>, our one file ego network data frame. This is a straightforward task and just requires subsetting the data to keep the columns of interest, corresponding to ego; in this case the first 13 columns in the data.</p>
<div class="sourceCode" id="cb491"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb491-1"><a href="ch6-Ego-Network-Data-R.html#cb491-1" aria-hidden="true" tabindex="-1"></a>ego_dat_fromonefile <span class="ot">&lt;-</span> egonets[, <span class="dv">1</span><span class="sc">:</span><span class="dv">13</span>]</span></code></pre></div>
<p>This data is the same as <code>ego_dat</code>. Now we need to get the alter attribute information. The task is harder here, as we need to take data defined by ego, where each ego is a different row, and turn it into a data frame where the rows correspond to each named alter. This amounts to stacking the columns, moving from a 'wide' format to a 'long' format. We will write a little function to accomplish this task. We could also imagine employing functions like <code>reshape()</code> (in the reshape package) to do the same thing (see <a href="ch3-Cross-Sectional-Network-Data-R.html#ch3-Cross-Sectional-Network-Data-R">Chapter 3, Part 1</a>).</p>
<div class="sourceCode" id="cb492"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb492-1"><a href="ch6-Ego-Network-Data-R.html#cb492-1" aria-hidden="true" tabindex="-1"></a>create_alter_data <span class="ot">&lt;-</span> <span class="cf">function</span>(egonets, netsize, var_names, egoID){</span>
<span id="cb492-2"><a href="ch6-Ego-Network-Data-R.html#cb492-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Arguments: </span></span>
<span id="cb492-3"><a href="ch6-Ego-Network-Data-R.html#cb492-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># egonets: ego network data frame</span></span>
<span id="cb492-4"><a href="ch6-Ego-Network-Data-R.html#cb492-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># netsize: vector of ego network size</span></span>
<span id="cb492-5"><a href="ch6-Ego-Network-Data-R.html#cb492-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># var_names: names of variables to put on alter data frame (assumed to be</span></span>
<span id="cb492-6"><a href="ch6-Ego-Network-Data-R.html#cb492-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># var.name1, var.name2, for each alter)</span></span>
<span id="cb492-7"><a href="ch6-Ego-Network-Data-R.html#cb492-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># egoID: name of id of ego on ego network data frame</span></span>
<span id="cb492-8"><a href="ch6-Ego-Network-Data-R.html#cb492-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-9"><a href="ch6-Ego-Network-Data-R.html#cb492-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># creating empty list to hold output for each variable:</span></span>
<span id="cb492-10"><a href="ch6-Ego-Network-Data-R.html#cb492-10" aria-hidden="true" tabindex="-1"></a>  overall_list <span class="ot">&lt;-</span> <span class="fu">list</span>() </span>
<span id="cb492-11"><a href="ch6-Ego-Network-Data-R.html#cb492-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-12"><a href="ch6-Ego-Network-Data-R.html#cb492-12" aria-hidden="true" tabindex="-1"></a>  <span class="co"># taking out the isolates as they have no alters:</span></span>
<span id="cb492-13"><a href="ch6-Ego-Network-Data-R.html#cb492-13" aria-hidden="true" tabindex="-1"></a>  egonets_noisolates <span class="ot">&lt;-</span> egonets[netsize <span class="sc">&gt;</span> <span class="dv">0</span>, ] </span>
<span id="cb492-14"><a href="ch6-Ego-Network-Data-R.html#cb492-14" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb492-15"><a href="ch6-Ego-Network-Data-R.html#cb492-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># redefining network size after taking out isolates:</span></span>
<span id="cb492-16"><a href="ch6-Ego-Network-Data-R.html#cb492-16" aria-hidden="true" tabindex="-1"></a>  netsize_updated <span class="ot">&lt;-</span> netsize[netsize <span class="sc">&gt;</span> <span class="dv">0</span>] </span>
<span id="cb492-17"><a href="ch6-Ego-Network-Data-R.html#cb492-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-18"><a href="ch6-Ego-Network-Data-R.html#cb492-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># running over each variable name:</span></span>
<span id="cb492-19"><a href="ch6-Ego-Network-Data-R.html#cb492-19" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (p <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">length</span>(var_names)){</span>
<span id="cb492-20"><a href="ch6-Ego-Network-Data-R.html#cb492-20" aria-hidden="true" tabindex="-1"></a>  var_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb492-21"><a href="ch6-Ego-Network-Data-R.html#cb492-21" aria-hidden="true" tabindex="-1"></a>  alter_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb492-22"><a href="ch6-Ego-Network-Data-R.html#cb492-22" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb492-23"><a href="ch6-Ego-Network-Data-R.html#cb492-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># running over each ego:</span></span>
<span id="cb492-24"><a href="ch6-Ego-Network-Data-R.html#cb492-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(egonets_noisolates)){</span>
<span id="cb492-25"><a href="ch6-Ego-Network-Data-R.html#cb492-25" aria-hidden="true" tabindex="-1"></a>      <span class="co"># getting alter id number:</span></span>
<span id="cb492-26"><a href="ch6-Ego-Network-Data-R.html#cb492-26" aria-hidden="true" tabindex="-1"></a>          alter_nums <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span><span class="sc">:</span>netsize_updated[x], <span class="at">times =</span> <span class="dv">1</span>)</span>
<span id="cb492-27"><a href="ch6-Ego-Network-Data-R.html#cb492-27" aria-hidden="true" tabindex="-1"></a>      </span>
<span id="cb492-28"><a href="ch6-Ego-Network-Data-R.html#cb492-28" aria-hidden="true" tabindex="-1"></a>      <span class="co"># Now we grab the alter columns for that ego and put those </span></span>
<span id="cb492-29"><a href="ch6-Ego-Network-Data-R.html#cb492-29" aria-hidden="true" tabindex="-1"></a>      <span class="co"># values in a larger list so we can stack them later on </span></span>
<span id="cb492-30"><a href="ch6-Ego-Network-Data-R.html#cb492-30" aria-hidden="true" tabindex="-1"></a>      <span class="co"># into one big vector (one for each variable of interest)</span></span>
<span id="cb492-31"><a href="ch6-Ego-Network-Data-R.html#cb492-31" aria-hidden="true" tabindex="-1"></a>          alt_cols <span class="ot">&lt;-</span> <span class="fu">paste</span>(<span class="fu">rep</span>(var_names[p], <span class="at">each =</span> netsize_updated[x]), </span>
<span id="cb492-32"><a href="ch6-Ego-Network-Data-R.html#cb492-32" aria-hidden="true" tabindex="-1"></a>                            alter_nums, <span class="at">sep =</span> <span class="st">&quot;&quot;</span>)</span>
<span id="cb492-33"><a href="ch6-Ego-Network-Data-R.html#cb492-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-34"><a href="ch6-Ego-Network-Data-R.html#cb492-34" aria-hidden="true" tabindex="-1"></a>          var_list[[x]] <span class="ot">&lt;-</span> egonets_noisolates[x, alt_cols]</span>
<span id="cb492-35"><a href="ch6-Ego-Network-Data-R.html#cb492-35" aria-hidden="true" tabindex="-1"></a>          </span>
<span id="cb492-36"><a href="ch6-Ego-Network-Data-R.html#cb492-36" aria-hidden="true" tabindex="-1"></a>          alter_list[[x]] <span class="ot">&lt;-</span> alter_nums</span>
<span id="cb492-37"><a href="ch6-Ego-Network-Data-R.html#cb492-37" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb492-38"><a href="ch6-Ego-Network-Data-R.html#cb492-38" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb492-39"><a href="ch6-Ego-Network-Data-R.html#cb492-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># stacking all alter values into one long column</span></span>
<span id="cb492-40"><a href="ch6-Ego-Network-Data-R.html#cb492-40" aria-hidden="true" tabindex="-1"></a>  var <span class="ot">&lt;-</span> <span class="fu">unlist</span>(var_list) </span>
<span id="cb492-41"><a href="ch6-Ego-Network-Data-R.html#cb492-41" aria-hidden="true" tabindex="-1"></a>  overall_list[[p]] <span class="ot">&lt;-</span> var</span>
<span id="cb492-42"><a href="ch6-Ego-Network-Data-R.html#cb492-42" aria-hidden="true" tabindex="-1"></a>  } </span>
<span id="cb492-43"><a href="ch6-Ego-Network-Data-R.html#cb492-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-44"><a href="ch6-Ego-Network-Data-R.html#cb492-44" aria-hidden="true" tabindex="-1"></a>  <span class="co"># putting all new variables together:</span></span>
<span id="cb492-45"><a href="ch6-Ego-Network-Data-R.html#cb492-45" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="fu">do.call</span>(data.frame, overall_list)) </span>
<span id="cb492-46"><a href="ch6-Ego-Network-Data-R.html#cb492-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-47"><a href="ch6-Ego-Network-Data-R.html#cb492-47" aria-hidden="true" tabindex="-1"></a>  <span class="co"># putting useful column names on data frame</span></span>
<span id="cb492-48"><a href="ch6-Ego-Network-Data-R.html#cb492-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(dat) <span class="ot">&lt;-</span> var_names </span>
<span id="cb492-49"><a href="ch6-Ego-Network-Data-R.html#cb492-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-50"><a href="ch6-Ego-Network-Data-R.html#cb492-50" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adding egoID and alterID to data frame:</span></span>
<span id="cb492-51"><a href="ch6-Ego-Network-Data-R.html#cb492-51" aria-hidden="true" tabindex="-1"></a>  dat <span class="ot">&lt;-</span> <span class="fu">cbind</span>(<span class="fu">rep</span>(egonets_noisolates[, egoID], netsize_updated), </span>
<span id="cb492-52"><a href="ch6-Ego-Network-Data-R.html#cb492-52" aria-hidden="true" tabindex="-1"></a>          <span class="fu">unlist</span>(alter_list), dat) </span>
<span id="cb492-53"><a href="ch6-Ego-Network-Data-R.html#cb492-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-54"><a href="ch6-Ego-Network-Data-R.html#cb492-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(dat)[<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>] <span class="ot">&lt;-</span> <span class="fu">c</span>(egoID, <span class="st">&quot;alterID&quot;</span>)</span>
<span id="cb492-55"><a href="ch6-Ego-Network-Data-R.html#cb492-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb492-56"><a href="ch6-Ego-Network-Data-R.html#cb492-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(dat)</span>
<span id="cb492-57"><a href="ch6-Ego-Network-Data-R.html#cb492-57" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>Now we will use our function to get the alter data frame from our 'one file format' ego network data. The main arguments are egonets (the input data frame), netsize (a vector showing the ego network size) and var_names, the column names of interest. Here we restrict the column names to <code>AGE</code>, <code>EDUC</code>, <code>RACE</code>, <code>SEX</code> and <code>RELIG</code>. We also set the name for the egoID as <code>CASEID</code>.</p>
<div class="sourceCode" id="cb493"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb493-1"><a href="ch6-Ego-Network-Data-R.html#cb493-1" aria-hidden="true" tabindex="-1"></a>alter_dat_fromonefile <span class="ot">&lt;-</span> <span class="fu">create_alter_data</span>(<span class="at">egonets =</span> egonets, </span>
<span id="cb493-2"><a href="ch6-Ego-Network-Data-R.html#cb493-2" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">netsize =</span> egonets<span class="sc">$</span>netsize, </span>
<span id="cb493-3"><a href="ch6-Ego-Network-Data-R.html#cb493-3" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">var_names =</span> <span class="fu">c</span>(<span class="st">&quot;AGE&quot;</span>, <span class="st">&quot;EDUC&quot;</span>, <span class="st">&quot;RACE&quot;</span>,</span>
<span id="cb493-4"><a href="ch6-Ego-Network-Data-R.html#cb493-4" aria-hidden="true" tabindex="-1"></a>                                                         <span class="st">&quot;SEX&quot;</span>, <span class="st">&quot;RELIG&quot;</span>), </span>
<span id="cb493-5"><a href="ch6-Ego-Network-Data-R.html#cb493-5" aria-hidden="true" tabindex="-1"></a>                                           <span class="at">egoID =</span> <span class="st">&quot;CASEID&quot;</span>)</span></code></pre></div>
<div class="sourceCode" id="cb494"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb494-1"><a href="ch6-Ego-Network-Data-R.html#cb494-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(alter_dat_fromonefile)</span></code></pre></div>
<pre><code>##     CASEID alterID AGE EDUC  RACE    SEX      RELIG
## 1 19850001       1  32   18 white   male     jewish
## 2 19850001       2  29   16 white female protestant
## 3 19850001       3  32   18 white   male     jewish
## 4 19850001       4  35   16 white   male     jewish
## 5 19850001       5  29   13 white female   catholic
## 6 19850002       1  42   12 white female   catholic</code></pre>
<p>We can see that the result of this function is a data frame with alters on the rows and the attributes of interest on the columns. We also have the id of the ego for each alter. This data frame is the same as <code>alter_dat</code>.</p>
<p>As a final step, we need to create our alter-alter tie information data frame. Again, we will write a little function to accomplish this.</p>
<div class="sourceCode" id="cb496"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb496-1"><a href="ch6-Ego-Network-Data-R.html#cb496-1" aria-hidden="true" tabindex="-1"></a>create_alteralter_data <span class="ot">&lt;-</span> <span class="cf">function</span>(egonets, netsize, aa_tie_data, </span>
<span id="cb496-2"><a href="ch6-Ego-Network-Data-R.html#cb496-2" aria-hidden="true" tabindex="-1"></a>                                     egoID, max_alter){</span>
<span id="cb496-3"><a href="ch6-Ego-Network-Data-R.html#cb496-3" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Arguments:</span></span>
<span id="cb496-4"><a href="ch6-Ego-Network-Data-R.html#cb496-4" aria-hidden="true" tabindex="-1"></a>  <span class="co"># egonets: ego network data frame </span></span>
<span id="cb496-5"><a href="ch6-Ego-Network-Data-R.html#cb496-5" aria-hidden="true" tabindex="-1"></a>  <span class="co"># netsize: vector of ego network size </span></span>
<span id="cb496-6"><a href="ch6-Ego-Network-Data-R.html#cb496-6" aria-hidden="true" tabindex="-1"></a>  <span class="co"># aa_tie_data : data for each ego showing ties between alters; </span></span>
<span id="cb496-7"><a href="ch6-Ego-Network-Data-R.html#cb496-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># assumed to be ordered by 1-2; 1-3; 1-4; 1-5, etc. on the columns</span></span>
<span id="cb496-8"><a href="ch6-Ego-Network-Data-R.html#cb496-8" aria-hidden="true" tabindex="-1"></a>  <span class="co"># egoID: name of id of ego on ego network data frame</span></span>
<span id="cb496-9"><a href="ch6-Ego-Network-Data-R.html#cb496-9" aria-hidden="true" tabindex="-1"></a>  <span class="co"># max_alter: maximum of number of alter of which alter-alter tie </span></span>
<span id="cb496-10"><a href="ch6-Ego-Network-Data-R.html#cb496-10" aria-hidden="true" tabindex="-1"></a>  <span class="co"># data was reported on</span></span>
<span id="cb496-11"><a href="ch6-Ego-Network-Data-R.html#cb496-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb496-12"><a href="ch6-Ego-Network-Data-R.html#cb496-12" aria-hidden="true" tabindex="-1"></a>  overall_list <span class="ot">&lt;-</span> <span class="fu">list</span>()</span>
<span id="cb496-13"><a href="ch6-Ego-Network-Data-R.html#cb496-13" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb496-14"><a href="ch6-Ego-Network-Data-R.html#cb496-14" aria-hidden="true" tabindex="-1"></a>  <span class="co"># taking out the isolates and those</span></span>
<span id="cb496-15"><a href="ch6-Ego-Network-Data-R.html#cb496-15" aria-hidden="true" tabindex="-1"></a>  <span class="co"># with only one alter as they have no alter-alter ties </span></span>
<span id="cb496-16"><a href="ch6-Ego-Network-Data-R.html#cb496-16" aria-hidden="true" tabindex="-1"></a>  egonets_noisolates <span class="ot">&lt;-</span> egonets[netsize <span class="sc">&gt;</span> <span class="dv">1</span>, ] </span>
<span id="cb496-17"><a href="ch6-Ego-Network-Data-R.html#cb496-17" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb496-18"><a href="ch6-Ego-Network-Data-R.html#cb496-18" aria-hidden="true" tabindex="-1"></a>  <span class="co"># also taking out the </span></span>
<span id="cb496-19"><a href="ch6-Ego-Network-Data-R.html#cb496-19" aria-hidden="true" tabindex="-1"></a>  <span class="co"># isolates and those with only one alter </span></span>
<span id="cb496-20"><a href="ch6-Ego-Network-Data-R.html#cb496-20" aria-hidden="true" tabindex="-1"></a>  <span class="co"># for the alter-alter tie input data</span></span>
<span id="cb496-21"><a href="ch6-Ego-Network-Data-R.html#cb496-21" aria-hidden="true" tabindex="-1"></a>  alteralter_tie_data <span class="ot">&lt;-</span> aa_tie_data[netsize <span class="sc">&gt;</span> <span class="dv">1</span>, ] </span>
<span id="cb496-22"><a href="ch6-Ego-Network-Data-R.html#cb496-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb496-23"><a href="ch6-Ego-Network-Data-R.html#cb496-23" aria-hidden="true" tabindex="-1"></a>  <span class="co"># redefining network size after taking out isolates:</span></span>
<span id="cb496-24"><a href="ch6-Ego-Network-Data-R.html#cb496-24" aria-hidden="true" tabindex="-1"></a>  netsize_updated <span class="ot">&lt;-</span> netsize[netsize <span class="sc">&gt;</span> <span class="dv">1</span>] </span>
<span id="cb496-25"><a href="ch6-Ego-Network-Data-R.html#cb496-25" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb496-26"><a href="ch6-Ego-Network-Data-R.html#cb496-26" aria-hidden="true" tabindex="-1"></a>  <span class="co"># defining possible alter-alter ties</span></span>
<span id="cb496-27"><a href="ch6-Ego-Network-Data-R.html#cb496-27" aria-hidden="true" tabindex="-1"></a>  alter_ids <span class="ot">&lt;-</span> <span class="fu">t</span>(<span class="fu">combn</span>(max_alter, <span class="dv">2</span>)) </span>
<span id="cb496-28"><a href="ch6-Ego-Network-Data-R.html#cb496-28" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb496-29"><a href="ch6-Ego-Network-Data-R.html#cb496-29" aria-hidden="true" tabindex="-1"></a>  <span class="co"># running over each ego:</span></span>
<span id="cb496-30"><a href="ch6-Ego-Network-Data-R.html#cb496-30" aria-hidden="true" tabindex="-1"></a>  <span class="cf">for</span> (x <span class="cf">in</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(egonets_noisolates)){</span>
<span id="cb496-31"><a href="ch6-Ego-Network-Data-R.html#cb496-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb496-32"><a href="ch6-Ego-Network-Data-R.html#cb496-32" aria-hidden="true" tabindex="-1"></a>  <span class="co"># First we create a data frame based on the ego ids, the possible </span></span>
<span id="cb496-33"><a href="ch6-Ego-Network-Data-R.html#cb496-33" aria-hidden="true" tabindex="-1"></a>  <span class="co"># alter-alter ties and the weights for each alter-alter tie, </span></span>
<span id="cb496-34"><a href="ch6-Ego-Network-Data-R.html#cb496-34" aria-hidden="true" tabindex="-1"></a>  <span class="co"># based on the  input data for that ego</span></span>
<span id="cb496-35"><a href="ch6-Ego-Network-Data-R.html#cb496-35" aria-hidden="true" tabindex="-1"></a>    alter_dat_row <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">egoID =</span> egonets_noisolates[x, egoID], </span>
<span id="cb496-36"><a href="ch6-Ego-Network-Data-R.html#cb496-36" aria-hidden="true" tabindex="-1"></a>                                alter_ids, </span>
<span id="cb496-37"><a href="ch6-Ego-Network-Data-R.html#cb496-37" aria-hidden="true" tabindex="-1"></a>                                <span class="at">weight =</span> <span class="fu">unlist</span>(alteralter_tie_data[x, ]))</span>
<span id="cb496-38"><a href="ch6-Ego-Network-Data-R.html#cb496-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb496-39"><a href="ch6-Ego-Network-Data-R.html#cb496-39" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Here we reduce some of the rows (corresponding to alter-alter ties) </span></span>
<span id="cb496-40"><a href="ch6-Ego-Network-Data-R.html#cb496-40" aria-hidden="true" tabindex="-1"></a>  <span class="co"># if ego had less than the max number of alters or if some </span></span>
<span id="cb496-41"><a href="ch6-Ego-Network-Data-R.html#cb496-41" aria-hidden="true" tabindex="-1"></a>  <span class="co"># of the alter-alter ties are not present (assumed if value </span></span>
<span id="cb496-42"><a href="ch6-Ego-Network-Data-R.html#cb496-42" aria-hidden="true" tabindex="-1"></a>  <span class="co"># is equal to 0 or NA)</span></span>
<span id="cb496-43"><a href="ch6-Ego-Network-Data-R.html#cb496-43" aria-hidden="true" tabindex="-1"></a>    alter_dat_row <span class="ot">&lt;-</span> alter_dat_row[alter_dat_row[, <span class="dv">2</span>] <span class="sc">&lt;=</span> netsize_updated[x] <span class="sc">&amp;</span> </span>
<span id="cb496-44"><a href="ch6-Ego-Network-Data-R.html#cb496-44" aria-hidden="true" tabindex="-1"></a>                              alter_dat_row[, <span class="dv">3</span>] <span class="sc">&lt;=</span> netsize_updated[x] <span class="sc">&amp;</span> </span>
<span id="cb496-45"><a href="ch6-Ego-Network-Data-R.html#cb496-45" aria-hidden="true" tabindex="-1"></a>                              <span class="sc">!</span><span class="fu">is.na</span>(alter_dat_row<span class="sc">$</span>weight) <span class="sc">&amp;</span> </span>
<span id="cb496-46"><a href="ch6-Ego-Network-Data-R.html#cb496-46" aria-hidden="true" tabindex="-1"></a>                              alter_dat_row<span class="sc">$</span>weight <span class="sc">!=</span> <span class="dv">0</span>, ]</span>
<span id="cb496-47"><a href="ch6-Ego-Network-Data-R.html#cb496-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb496-48"><a href="ch6-Ego-Network-Data-R.html#cb496-48" aria-hidden="true" tabindex="-1"></a>    overall_list[[x]] <span class="ot">&lt;-</span> alter_dat_row</span>
<span id="cb496-49"><a href="ch6-Ego-Network-Data-R.html#cb496-49" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb496-50"><a href="ch6-Ego-Network-Data-R.html#cb496-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb496-51"><a href="ch6-Ego-Network-Data-R.html#cb496-51" aria-hidden="true" tabindex="-1"></a>  <span class="co">#putting all alter-alter ties, by ego, in one data frame:</span></span>
<span id="cb496-52"><a href="ch6-Ego-Network-Data-R.html#cb496-52" aria-hidden="true" tabindex="-1"></a>  alter_alter_dat <span class="ot">&lt;-</span> <span class="fu">do.call</span>(rbind, overall_list) </span>
<span id="cb496-53"><a href="ch6-Ego-Network-Data-R.html#cb496-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb496-54"><a href="ch6-Ego-Network-Data-R.html#cb496-54" aria-hidden="true" tabindex="-1"></a>  <span class="co">#putting useful column names on the data frame:</span></span>
<span id="cb496-55"><a href="ch6-Ego-Network-Data-R.html#cb496-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">colnames</span>(alter_alter_dat) <span class="ot">&lt;-</span> <span class="fu">c</span>(egoID, <span class="st">&quot;source&quot;</span>, <span class="st">&quot;target&quot;</span>, <span class="st">&quot;weight&quot;</span>)</span>
<span id="cb496-56"><a href="ch6-Ego-Network-Data-R.html#cb496-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rownames</span>(alter_alter_dat) <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">:</span><span class="fu">nrow</span>(alter_alter_dat)</span>
<span id="cb496-57"><a href="ch6-Ego-Network-Data-R.html#cb496-57" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb496-58"><a href="ch6-Ego-Network-Data-R.html#cb496-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">return</span>(alter_alter_dat)</span>
<span id="cb496-59"><a href="ch6-Ego-Network-Data-R.html#cb496-59" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We now use our function to create the alter-alter tie data frame. We first need to define the aa_tie_data input. This amounts to grabbing the columns from <code>egonets</code> corresponding to the ties between each alter. In this case, this corresponds to columns 64 to 73. We also set max_alter at 5. The rest of the arguments (egonets, netsize and egoID) are the same as in the previous function.</p>
<div class="sourceCode" id="cb497"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb497-1"><a href="ch6-Ego-Network-Data-R.html#cb497-1" aria-hidden="true" tabindex="-1"></a>aa_tie_data <span class="ot">&lt;-</span> egonets[, <span class="dv">64</span><span class="sc">:</span><span class="dv">73</span>]</span>
<span id="cb497-2"><a href="ch6-Ego-Network-Data-R.html#cb497-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb497-3"><a href="ch6-Ego-Network-Data-R.html#cb497-3" aria-hidden="true" tabindex="-1"></a>alteralter_dat_fromonefile <span class="ot">&lt;-</span> <span class="fu">create_alteralter_data</span>(<span class="at">egonets =</span> egonets, </span>
<span id="cb497-4"><a href="ch6-Ego-Network-Data-R.html#cb497-4" aria-hidden="true" tabindex="-1"></a>                                                     <span class="at">netsize =</span> egonets<span class="sc">$</span>netsize, </span>
<span id="cb497-5"><a href="ch6-Ego-Network-Data-R.html#cb497-5" aria-hidden="true" tabindex="-1"></a>                                                     <span class="at">aa_tie_data =</span> aa_tie_data,</span>
<span id="cb497-6"><a href="ch6-Ego-Network-Data-R.html#cb497-6" aria-hidden="true" tabindex="-1"></a>                                                     <span class="at">egoID =</span> <span class="st">&quot;CASEID&quot;</span>, </span>
<span id="cb497-7"><a href="ch6-Ego-Network-Data-R.html#cb497-7" aria-hidden="true" tabindex="-1"></a>                                                     <span class="at">max_alter =</span> <span class="dv">5</span>)</span></code></pre></div>
<div class="sourceCode" id="cb498"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb498-1"><a href="ch6-Ego-Network-Data-R.html#cb498-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(alteralter_dat_fromonefile)</span></code></pre></div>
<pre><code>##     CASEID source target weight
## 1 19850001      1      2      2
## 2 19850001      1      3      1
## 3 19850001      1      4      1
## 4 19850001      1      5      1
## 5 19850001      2      3      2
## 6 19850001      2      4      2</code></pre>
<p>The function yields our alter-alter tie data frame, with each row corresponding to an alter-alter pair where a tie exists (nested within egos). This is the same as <code>alteralter_dat</code>. Now that we have our three files we can go ahead and create the egor object as before (with different column names):</p>
<div class="sourceCode" id="cb500"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb500-1"><a href="ch6-Ego-Network-Data-R.html#cb500-1" aria-hidden="true" tabindex="-1"></a>egonetlist2 <span class="ot">&lt;-</span> <span class="fu">egor</span>(<span class="at">alters =</span> alter_dat_fromonefile, </span>
<span id="cb500-2"><a href="ch6-Ego-Network-Data-R.html#cb500-2" aria-hidden="true" tabindex="-1"></a>                    <span class="at">egos =</span> ego_dat_fromonefile, </span>
<span id="cb500-3"><a href="ch6-Ego-Network-Data-R.html#cb500-3" aria-hidden="true" tabindex="-1"></a>                    <span class="at">aaties =</span> alteralter_dat_fromonefile, </span>
<span id="cb500-4"><a href="ch6-Ego-Network-Data-R.html#cb500-4" aria-hidden="true" tabindex="-1"></a>                    <span class="at">alter_design =</span> <span class="fu">list</span>(<span class="at">max =</span> <span class="dv">5</span>), </span>
<span id="cb500-5"><a href="ch6-Ego-Network-Data-R.html#cb500-5" aria-hidden="true" tabindex="-1"></a>                    <span class="at">ID.vars =</span> <span class="fu">list</span>(<span class="at">ego =</span> <span class="st">&quot;CASEID&quot;</span>, <span class="at">alter =</span> <span class="st">&quot;alterID&quot;</span>, </span>
<span id="cb500-6"><a href="ch6-Ego-Network-Data-R.html#cb500-6" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">source =</span> <span class="st">&quot;source&quot;</span>, <span class="at">target =</span> <span class="st">&quot;target&quot;</span>)) </span></code></pre></div>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="ch6-Ego-Network-Data-R.html#cb501-1" aria-hidden="true" tabindex="-1"></a>egonetlist2</span></code></pre></div>
<pre><code>## # EGO data (active): 1,531 × 13
##     .egoID   AGE  EDUC RACE  SEX    RELIG    AGE_CATEGORICAL EDUC_CATEGORICAL NUMGIVEN HAPPY HEALTH PARTYID WTSSALL
## *    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;    &lt;chr&gt;           &lt;chr&gt;               &lt;int&gt; &lt;int&gt;  &lt;int&gt;   &lt;int&gt;   &lt;dbl&gt;
## 1 19850001    33    16 white male   jewish   30s             College                 6     2      2       1   1.04 
## 2 19850002    49    19 white male   catholic 40s             Post Graduate           6     2      1       4   1.04 
## 3 19850003    23    16 white female jewish   20s             College                 5     2      1       1   1.04 
## 4 19850004    26    20 white female jewish   20s             Post Graduate           5     2      2       0   0.518
## 5 19850005    24    17 white female catholic 20s             Post Graduate           5     2      2       2   0.518
## # ℹ 1,526 more rows
## # ALTER data: 4,483 × 7
##   .altID   .egoID   AGE  EDUC RACE  SEX    RELIG     
## *  &lt;int&gt;    &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  &lt;chr&gt;     
## 1      1 19850001    32    18 white male   jewish    
## 2      2 19850001    29    16 white female protestant
## 3      3 19850001    32    18 white male   jewish    
## # ℹ 4,480 more rows
## # AATIE data: 4,880 × 4
##     .egoID .srcID .tgtID weight
## *    &lt;int&gt;  &lt;int&gt;  &lt;int&gt;  &lt;int&gt;
## 1 19850001      1      2      2
## 2 19850001      1      3      1
## 3 19850001      1      4      1
## # ℹ 4,877 more rows</code></pre>
<p>This tutorial has walked through one analysis of ego network data in R. The remaining tutorials will generally focus on sociocentric network data (although see <a href="ch14-Network-Diffusion-Infectious-Diseases-R.html#ch14-Network-Diffusion-Infectious-Diseases-R">Chapter 14</a> for an example using ego network data in the context of epidemiological simulations), but many of the questions and problems have a direct analogy to the ego network case. With this in mind, our next tutorial deals with dyadic and triadic processes.</p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="ch5-Network-Visualization-R.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="ch7-Dyads-Triads-R.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo"]
},
"fontsettings": {
"theme": "white",
"family": "serif",
"size": 2.5
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section",
"scroll_highlight": true
},
"info": false
});
});
</script>

</body>

</html>
